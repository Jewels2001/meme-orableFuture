(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function Fo(n,t){const e=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return t?s=>!!e[s.toLowerCase()]:s=>!!e[s]}const xt={},qn=[],me=()=>{},Ju=()=>!1,Qu=/^on[^a-z]/,ur=n=>Qu.test(n),Do=n=>n.startsWith("onUpdate:"),Mt=Object.assign,ko=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},tf=Object.prototype.hasOwnProperty,at=(n,t)=>tf.call(n,t),Q=Array.isArray,ki=n=>fr(n)==="[object Map]",ef=n=>fr(n)==="[object Set]",nt=n=>typeof n=="function",Dt=n=>typeof n=="string",No=n=>typeof n=="symbol",bt=n=>n!==null&&typeof n=="object",Mc=n=>bt(n)&&nt(n.then)&&nt(n.catch),nf=Object.prototype.toString,fr=n=>nf.call(n),sf=n=>fr(n).slice(8,-1),rf=n=>fr(n)==="[object Object]",Go=n=>Dt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Fs=Fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dr=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},of=/-(\w)/g,Ae=dr(n=>n.replace(of,(t,e)=>e?e.toUpperCase():"")),af=/\B([A-Z])/g,pi=dr(n=>n.replace(af,"-$1").toLowerCase()),gr=dr(n=>n.charAt(0).toUpperCase()+n.slice(1)),Pr=dr(n=>n?`on${gr(n)}`:""),zi=(n,t)=>!Object.is(n,t),Fr=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},zs=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},lf=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Ka;const Qr=()=>Ka||(Ka=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wo(n){if(Q(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=Dt(i)?ff(i):Wo(i);if(s)for(const r in s)t[r]=s[r]}return t}else{if(Dt(n))return n;if(bt(n))return n}}const cf=/;(?![^(]*\))/g,hf=/:([^]+)/,uf=/\/\*[^]*?\*\//g;function ff(n){const t={};return n.replace(uf,"").split(cf).forEach(e=>{if(e){const i=e.split(hf);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Bo(n){let t="";if(Dt(n))t=n;else if(Q(n))for(let e=0;e<n.length;e++){const i=Bo(n[e]);i&&(t+=i+" ")}else if(bt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const df="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gf=Fo(df);function Oc(n){return!!n||n===""}let ue;class _f{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ue,!t&&ue&&(this.index=(ue.scopes||(ue.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=ue;try{return ue=this,t()}finally{ue=e}}}on(){ue=this}off(){ue=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function mf(n,t=ue){t&&t.active&&t.effects.push(n)}function pf(){return ue}const zo=n=>{const t=new Set(n);return t.w=0,t.n=0,t},Pc=n=>(n.w&un)>0,Fc=n=>(n.n&un)>0,yf=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=un},Ef=n=>{const{deps:t}=n;if(t.length){let e=0;for(let i=0;i<t.length;i++){const s=t[i];Pc(s)&&!Fc(s)?s.delete(n):t[e++]=s,s.w&=~un,s.n&=~un}t.length=e}},to=new WeakMap;let Mi=0,un=1;const eo=30;let fe;const Tn=Symbol(""),no=Symbol("");class Xo{constructor(t,e=null,i){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,mf(this,i)}run(){if(!this.active)return this.fn();let t=fe,e=cn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=fe,fe=this,cn=!0,un=1<<++Mi,Mi<=eo?yf(this):Va(this),this.fn()}finally{Mi<=eo&&Ef(this),un=1<<--Mi,fe=this.parent,cn=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){fe===this?this.deferStop=!0:this.active&&(Va(this),this.onStop&&this.onStop(),this.active=!1)}}function Va(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}let cn=!0;const Dc=[];function yi(){Dc.push(cn),cn=!1}function Ei(){const n=Dc.pop();cn=n===void 0?!0:n}function Jt(n,t,e){if(cn&&fe){let i=to.get(n);i||to.set(n,i=new Map);let s=i.get(e);s||i.set(e,s=zo()),kc(s)}}function kc(n,t){let e=!1;Mi<=eo?Fc(n)||(n.n|=un,e=!Pc(n)):e=!n.has(fe),e&&(n.add(fe),fe.deps.push(n))}function Ve(n,t,e,i,s,r){const o=to.get(n);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&Q(n)){const l=Number(i);o.forEach((h,c)=>{(c==="length"||c>=l)&&a.push(h)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":Q(n)?Go(e)&&a.push(o.get("length")):(a.push(o.get(Tn)),ki(n)&&a.push(o.get(no)));break;case"delete":Q(n)||(a.push(o.get(Tn)),ki(n)&&a.push(o.get(no)));break;case"set":ki(n)&&a.push(o.get(Tn));break}if(a.length===1)a[0]&&io(a[0]);else{const l=[];for(const h of a)h&&l.push(...h);io(zo(l))}}function io(n,t){const e=Q(n)?n:[...n];for(const i of e)i.computed&&Ha(i);for(const i of e)i.computed||Ha(i)}function Ha(n,t){(n!==fe||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const xf=Fo("__proto__,__v_isRef,__isVue"),Nc=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(No)),Cf=Yo(),vf=Yo(!1,!0),Rf=Yo(!0),Ua=wf();function wf(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const i=ft(this);for(let r=0,o=this.length;r<o;r++)Jt(i,"get",r+"");const s=i[t](...e);return s===-1||s===!1?i[t](...e.map(ft)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){yi();const i=ft(this)[t].apply(this,e);return Ei(),i}}),n}function Sf(n){const t=ft(this);return Jt(t,"has",n),t.hasOwnProperty(n)}function Yo(n=!1,t=!1){return function(i,s,r){if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(n?t?zf:Xc:t?zc:Bc).get(i))return i;const o=Q(i);if(!n){if(o&&at(Ua,s))return Reflect.get(Ua,s,r);if(s==="hasOwnProperty")return Sf}const a=Reflect.get(i,s,r);return(No(s)?Nc.has(s):xf(s))||(n||Jt(i,"get",s),t)?a:Xt(a)?o&&Go(s)?a:a.value:bt(a)?n?jc(a):mr(a):a}}const If=Gc(),bf=Gc(!0);function Gc(n=!1){return function(e,i,s,r){let o=e[i];if(ii(o)&&Xt(o)&&!Xt(s))return!1;if(!n&&(!Xs(s)&&!ii(s)&&(o=ft(o),s=ft(s)),!Q(e)&&Xt(o)&&!Xt(s)))return o.value=s,!0;const a=Q(e)&&Go(i)?Number(i)<e.length:at(e,i),l=Reflect.set(e,i,s,r);return e===ft(r)&&(a?zi(s,o)&&Ve(e,"set",i,s):Ve(e,"add",i,s)),l}}function Tf(n,t){const e=at(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&e&&Ve(n,"delete",t,void 0),i}function Af(n,t){const e=Reflect.has(n,t);return(!No(t)||!Nc.has(t))&&Jt(n,"has",t),e}function Lf(n){return Jt(n,"iterate",Q(n)?"length":Tn),Reflect.ownKeys(n)}const Wc={get:Cf,set:If,deleteProperty:Tf,has:Af,ownKeys:Lf},Mf={get:Rf,set(n,t){return!0},deleteProperty(n,t){return!0}},Of=Mt({},Wc,{get:vf,set:bf}),jo=n=>n,_r=n=>Reflect.getPrototypeOf(n);function Es(n,t,e=!1,i=!1){n=n.__v_raw;const s=ft(n),r=ft(t);e||(t!==r&&Jt(s,"get",t),Jt(s,"get",r));const{has:o}=_r(s),a=i?jo:e?Ho:Xi;if(o.call(s,t))return a(n.get(t));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(t)}function xs(n,t=!1){const e=this.__v_raw,i=ft(e),s=ft(n);return t||(n!==s&&Jt(i,"has",n),Jt(i,"has",s)),n===s?e.has(n):e.has(n)||e.has(s)}function Cs(n,t=!1){return n=n.__v_raw,!t&&Jt(ft(n),"iterate",Tn),Reflect.get(n,"size",n)}function $a(n){n=ft(n);const t=ft(this);return _r(t).has.call(t,n)||(t.add(n),Ve(t,"add",n,n)),this}function Za(n,t){t=ft(t);const e=ft(this),{has:i,get:s}=_r(e);let r=i.call(e,n);r||(n=ft(n),r=i.call(e,n));const o=s.call(e,n);return e.set(n,t),r?zi(t,o)&&Ve(e,"set",n,t):Ve(e,"add",n,t),this}function qa(n){const t=ft(this),{has:e,get:i}=_r(t);let s=e.call(t,n);s||(n=ft(n),s=e.call(t,n)),i&&i.call(t,n);const r=t.delete(n);return s&&Ve(t,"delete",n,void 0),r}function Ja(){const n=ft(this),t=n.size!==0,e=n.clear();return t&&Ve(n,"clear",void 0,void 0),e}function vs(n,t){return function(i,s){const r=this,o=r.__v_raw,a=ft(o),l=t?jo:n?Ho:Xi;return!n&&Jt(a,"iterate",Tn),o.forEach((h,c)=>i.call(s,l(h),l(c),r))}}function Rs(n,t,e){return function(...i){const s=this.__v_raw,r=ft(s),o=ki(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,h=s[n](...i),c=e?jo:t?Ho:Xi;return!t&&Jt(r,"iterate",l?no:Tn),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:a?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function Ue(n){return function(...t){return n==="delete"?!1:this}}function Pf(){const n={get(r){return Es(this,r)},get size(){return Cs(this)},has:xs,add:$a,set:Za,delete:qa,clear:Ja,forEach:vs(!1,!1)},t={get(r){return Es(this,r,!1,!0)},get size(){return Cs(this)},has:xs,add:$a,set:Za,delete:qa,clear:Ja,forEach:vs(!1,!0)},e={get(r){return Es(this,r,!0)},get size(){return Cs(this,!0)},has(r){return xs.call(this,r,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:vs(!0,!1)},i={get(r){return Es(this,r,!0,!0)},get size(){return Cs(this,!0)},has(r){return xs.call(this,r,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:vs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Rs(r,!1,!1),e[r]=Rs(r,!0,!1),t[r]=Rs(r,!1,!0),i[r]=Rs(r,!0,!0)}),[n,e,t,i]}const[Ff,Df,kf,Nf]=Pf();function Ko(n,t){const e=t?n?Nf:kf:n?Df:Ff;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(at(e,s)&&s in i?e:i,s,r)}const Gf={get:Ko(!1,!1)},Wf={get:Ko(!1,!0)},Bf={get:Ko(!0,!1)},Bc=new WeakMap,zc=new WeakMap,Xc=new WeakMap,zf=new WeakMap;function Xf(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yf(n){return n.__v_skip||!Object.isExtensible(n)?0:Xf(sf(n))}function mr(n){return ii(n)?n:Vo(n,!1,Wc,Gf,Bc)}function Yc(n){return Vo(n,!1,Of,Wf,zc)}function jc(n){return Vo(n,!0,Mf,Bf,Xc)}function Vo(n,t,e,i,s){if(!bt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Yf(n);if(o===0)return n;const a=new Proxy(n,o===2?i:e);return s.set(n,a),a}function Jn(n){return ii(n)?Jn(n.__v_raw):!!(n&&n.__v_isReactive)}function ii(n){return!!(n&&n.__v_isReadonly)}function Xs(n){return!!(n&&n.__v_isShallow)}function Kc(n){return Jn(n)||ii(n)}function ft(n){const t=n&&n.__v_raw;return t?ft(t):n}function Vc(n){return zs(n,"__v_skip",!0),n}const Xi=n=>bt(n)?mr(n):n,Ho=n=>bt(n)?jc(n):n;function Hc(n){cn&&fe&&(n=ft(n),kc(n.dep||(n.dep=zo())))}function Uc(n,t){n=ft(n);const e=n.dep;e&&io(e)}function Xt(n){return!!(n&&n.__v_isRef===!0)}function jf(n){return $c(n,!1)}function Kf(n){return $c(n,!0)}function $c(n,t){return Xt(n)?n:new Vf(n,t)}class Vf{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ft(t),this._value=e?t:Xi(t)}get value(){return Hc(this),this._value}set value(t){const e=this.__v_isShallow||Xs(t)||ii(t);t=e?t:ft(t),zi(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Xi(t),Uc(this))}}function Qn(n){return Xt(n)?n.value:n}const Hf={get:(n,t,e)=>Qn(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return Xt(s)&&!Xt(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function Zc(n){return Jn(n)?n:new Proxy(n,Hf)}class Uf{constructor(t,e,i,s){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Xo(t,()=>{this._dirty||(this._dirty=!0,Uc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=ft(this);return Hc(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function $f(n,t,e=!1){let i,s;const r=nt(n);return r?(i=n,s=me):(i=n.get,s=n.set),new Uf(i,s,r||!s,e)}function hn(n,t,e,i){let s;try{s=i?n(...i):n()}catch(r){pr(r,t,e)}return s}function pe(n,t,e,i){if(nt(n)){const r=hn(n,t,e,i);return r&&Mc(r)&&r.catch(o=>{pr(o,t,e)}),r}const s=[];for(let r=0;r<n.length;r++)s.push(pe(n[r],t,e,i));return s}function pr(n,t,e,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=e;for(;r;){const h=r.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](n,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){hn(l,null,10,[n,o,a]);return}}Zf(n,e,s,i)}function Zf(n,t,e,i=!0){console.error(n)}let Yi=!1,so=!1;const zt=[];let ve=0;const ti=[];let Be=null,Rn=0;const qc=Promise.resolve();let Uo=null;function Jc(n){const t=Uo||qc;return n?t.then(this?n.bind(this):n):t}function qf(n){let t=ve+1,e=zt.length;for(;t<e;){const i=t+e>>>1;ji(zt[i])<n?t=i+1:e=i}return t}function $o(n){(!zt.length||!zt.includes(n,Yi&&n.allowRecurse?ve+1:ve))&&(n.id==null?zt.push(n):zt.splice(qf(n.id),0,n),Qc())}function Qc(){!Yi&&!so&&(so=!0,Uo=qc.then(eh))}function Jf(n){const t=zt.indexOf(n);t>ve&&zt.splice(t,1)}function Qf(n){Q(n)?ti.push(...n):(!Be||!Be.includes(n,n.allowRecurse?Rn+1:Rn))&&ti.push(n),Qc()}function Qa(n,t=Yi?ve+1:0){for(;t<zt.length;t++){const e=zt[t];e&&e.pre&&(zt.splice(t,1),t--,e())}}function th(n){if(ti.length){const t=[...new Set(ti)];if(ti.length=0,Be){Be.push(...t);return}for(Be=t,Be.sort((e,i)=>ji(e)-ji(i)),Rn=0;Rn<Be.length;Rn++)Be[Rn]();Be=null,Rn=0}}const ji=n=>n.id==null?1/0:n.id,td=(n,t)=>{const e=ji(n)-ji(t);if(e===0){if(n.pre&&!t.pre)return-1;if(t.pre&&!n.pre)return 1}return e};function eh(n){so=!1,Yi=!0,zt.sort(td);const t=me;try{for(ve=0;ve<zt.length;ve++){const e=zt[ve];e&&e.active!==!1&&hn(e,null,14)}}finally{ve=0,zt.length=0,th(),Yi=!1,Uo=null,(zt.length||ti.length)&&eh()}}function ed(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||xt;let s=e;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:f}=i[c]||xt;f&&(s=e.map(d=>Dt(d)?d.trim():d)),u&&(s=e.map(lf))}let a,l=i[a=Pr(t)]||i[a=Pr(Ae(t))];!l&&r&&(l=i[a=Pr(pi(t))]),l&&pe(l,n,6,s);const h=i[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,pe(h,n,6,s)}}function nh(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!nt(n)){const l=h=>{const c=nh(h,t,!0);c&&(a=!0,Mt(o,c))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(bt(n)&&i.set(n,null),null):(Q(r)?r.forEach(l=>o[l]=null):Mt(o,r),bt(n)&&i.set(n,o),o)}function yr(n,t){return!n||!ur(t)?!1:(t=t.slice(2).replace(/Once$/,""),at(n,t[0].toLowerCase()+t.slice(1))||at(n,pi(t))||at(n,t))}let ge=null,ih=null;function Ys(n){const t=ge;return ge=n,ih=n&&n.type.__scopeId||null,t}function nd(n,t=ge,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&hl(-1);const r=Ys(t);let o;try{o=n(...s)}finally{Ys(r),i._d&&hl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Dr(n){const{type:t,vnode:e,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:h,render:c,renderCache:u,data:f,setupState:d,ctx:g,inheritAttrs:m}=n;let E,y;const C=Ys(n);try{if(e.shapeFlag&4){const v=s||i;E=Ce(c.call(v,v,u,r,d,f,g)),y=l}else{const v=t;E=Ce(v.length>1?v(r,{attrs:l,slots:a,emit:h}):v(r,null)),y=t.props?l:id(l)}}catch(v){Gi.length=0,pr(v,n,1),E=Zt(Ki)}let S=E;if(y&&m!==!1){const v=Object.keys(y),{shapeFlag:A}=S;v.length&&A&7&&(o&&v.some(Do)&&(y=sd(y,o)),S=si(S,y))}return e.dirs&&(S=si(S),S.dirs=S.dirs?S.dirs.concat(e.dirs):e.dirs),e.transition&&(S.transition=e.transition),E=S,Ys(C),E}const id=n=>{let t;for(const e in n)(e==="class"||e==="style"||ur(e))&&((t||(t={}))[e]=n[e]);return t},sd=(n,t)=>{const e={};for(const i in n)(!Do(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function rd(n,t,e){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?tl(i,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(o[f]!==i[f]&&!yr(h,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?tl(i,o,h):!0:!!o;return!1}function tl(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==n[r]&&!yr(e,r))return!0}return!1}function od({vnode:n,parent:t},e){for(;t&&t.subTree===n;)(n=t.vnode).el=e,t=t.parent}const ad=n=>n.__isSuspense;function ld(n,t){t&&t.pendingBranch?Q(n)?t.effects.push(...n):t.effects.push(n):Qf(n)}const ws={};function Ds(n,t,e){return sh(n,t,e)}function sh(n,t,{immediate:e,deep:i,flush:s,onTrack:r,onTrigger:o}=xt){var a;const l=pf()===((a=Pt)==null?void 0:a.scope)?Pt:null;let h,c=!1,u=!1;if(Xt(n)?(h=()=>n.value,c=Xs(n)):Jn(n)?(h=()=>n,i=!0):Q(n)?(u=!0,c=n.some(v=>Jn(v)||Xs(v)),h=()=>n.map(v=>{if(Xt(v))return v.value;if(Jn(v))return Hn(v);if(nt(v))return hn(v,l,2)})):nt(n)?t?h=()=>hn(n,l,2):h=()=>{if(!(l&&l.isUnmounted))return f&&f(),pe(n,l,3,[d])}:h=me,t&&i){const v=h;h=()=>Hn(v())}let f,d=v=>{f=C.onStop=()=>{hn(v,l,4)}},g;if(Hi)if(d=me,t?e&&pe(t,l,3,[h(),u?[]:void 0,d]):h(),s==="sync"){const v=og();g=v.__watcherHandles||(v.__watcherHandles=[])}else return me;let m=u?new Array(n.length).fill(ws):ws;const E=()=>{if(C.active)if(t){const v=C.run();(i||c||(u?v.some((A,L)=>zi(A,m[L])):zi(v,m)))&&(f&&f(),pe(t,l,3,[v,m===ws?void 0:u&&m[0]===ws?[]:m,d]),m=v)}else C.run()};E.allowRecurse=!!t;let y;s==="sync"?y=E:s==="post"?y=()=>Vt(E,l&&l.suspense):(E.pre=!0,l&&(E.id=l.uid),y=()=>$o(E));const C=new Xo(h,y);t?e?E():m=C.run():s==="post"?Vt(C.run.bind(C),l&&l.suspense):C.run();const S=()=>{C.stop(),l&&l.scope&&ko(l.scope.effects,C)};return g&&g.push(S),S}function cd(n,t,e){const i=this.proxy,s=Dt(n)?n.includes(".")?rh(i,n):()=>i[n]:n.bind(i,i);let r;nt(t)?r=t:(r=t.handler,e=t);const o=Pt;ri(this);const a=sh(s,r.bind(i),e);return o?ri(o):An(),a}function rh(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}function Hn(n,t){if(!bt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),Xt(n))Hn(n.value,t);else if(Q(n))for(let e=0;e<n.length;e++)Hn(n[e],t);else if(ef(n)||ki(n))n.forEach(e=>{Hn(e,t)});else if(rf(n))for(const e in n)Hn(n[e],t);return n}function yn(n,t,e,i){const s=n.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(yi(),pe(l,e,8,[n.el,a,n,t]),Ei())}}function oh(n,t){return nt(n)?(()=>Mt({name:n.name},t,{setup:n}))():n}const ks=n=>!!n.type.__asyncLoader,ah=n=>n.type.__isKeepAlive;function hd(n,t){lh(n,"a",t)}function ud(n,t){lh(n,"da",t)}function lh(n,t,e=Pt){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Er(t,i,e),e){let s=e.parent;for(;s&&s.parent;)ah(s.parent.vnode)&&fd(i,t,e,s),s=s.parent}}function fd(n,t,e,i){const s=Er(t,n,i,!0);ch(()=>{ko(i[t],s)},e)}function Er(n,t,e=Pt,i=!1){if(e){const s=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;yi(),ri(e);const a=pe(t,e,n,o);return An(),Ei(),a});return i?s.unshift(r):s.push(r),r}}const He=n=>(t,e=Pt)=>(!Hi||n==="sp")&&Er(n,(...i)=>t(...i),e),dd=He("bm"),gd=He("m"),_d=He("bu"),md=He("u"),pd=He("bum"),ch=He("um"),yd=He("sp"),Ed=He("rtg"),xd=He("rtc");function Cd(n,t=Pt){Er("ec",n,t)}const hh="components";function vd(n,t){return wd(hh,n,!0,t)||n}const Rd=Symbol.for("v-ndc");function wd(n,t,e=!0,i=!1){const s=ge||Pt;if(s){const r=s.type;if(n===hh){const a=ig(r,!1);if(a&&(a===t||a===Ae(t)||a===gr(Ae(t))))return r}const o=el(s[n]||r[n],t)||el(s.appContext[n],t);return!o&&i?r:o}}function el(n,t){return n&&(n[t]||n[Ae(t)]||n[gr(Ae(t))])}const ro=n=>n?vh(n)?ta(n)||n.proxy:ro(n.parent):null,Ni=Mt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>ro(n.parent),$root:n=>ro(n.root),$emit:n=>n.emit,$options:n=>Zo(n),$forceUpdate:n=>n.f||(n.f=()=>$o(n.update)),$nextTick:n=>n.n||(n.n=Jc.bind(n.proxy)),$watch:n=>cd.bind(n)}),kr=(n,t)=>n!==xt&&!n.__isScriptSetup&&at(n,t),Sd={get({_:n},t){const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let h;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return r[t]}else{if(kr(i,t))return o[t]=1,i[t];if(s!==xt&&at(s,t))return o[t]=2,s[t];if((h=n.propsOptions[0])&&at(h,t))return o[t]=3,r[t];if(e!==xt&&at(e,t))return o[t]=4,e[t];oo&&(o[t]=0)}}const c=Ni[t];let u,f;if(c)return t==="$attrs"&&Jt(n,"get",t),c(n);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==xt&&at(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,at(f,t))return f[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:r}=n;return kr(s,t)?(s[t]=e,!0):i!==xt&&at(i,t)?(i[t]=e,!0):at(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!e[o]||n!==xt&&at(n,o)||kr(t,o)||(a=r[0])&&at(a,o)||at(i,o)||at(Ni,o)||at(s.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:at(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function nl(n){return Q(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let oo=!0;function Id(n){const t=Zo(n),e=n.proxy,i=n.ctx;oo=!1,t.beforeCreate&&il(t.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:E,beforeDestroy:y,beforeUnmount:C,destroyed:S,unmounted:v,render:A,renderTracked:L,renderTriggered:k,errorCaptured:N,serverPrefetch:q,expose:J,inheritAttrs:lt,components:rt,directives:et,filters:Tt}=t;if(h&&bd(h,i,null),o)for(const B in o){const X=o[B];nt(X)&&(i[B]=X.bind(e))}if(s){const B=s.call(e,e);bt(B)&&(n.data=mr(B))}if(oo=!0,r)for(const B in r){const X=r[B],mt=nt(X)?X.bind(e,e):nt(X.get)?X.get.bind(e,e):me,pt=!nt(X)&&nt(X.set)?X.set.bind(e):me,St=de({get:mt,set:pt});Object.defineProperty(i,B,{enumerable:!0,configurable:!0,get:()=>St.value,set:O=>St.value=O})}if(a)for(const B in a)uh(a[B],i,e,B);if(l){const B=nt(l)?l.call(e):l;Reflect.ownKeys(B).forEach(X=>{Ns(X,B[X])})}c&&il(c,n,"c");function V(B,X){Q(X)?X.forEach(mt=>B(mt.bind(e))):X&&B(X.bind(e))}if(V(dd,u),V(gd,f),V(_d,d),V(md,g),V(hd,m),V(ud,E),V(Cd,N),V(xd,L),V(Ed,k),V(pd,C),V(ch,v),V(yd,q),Q(J))if(J.length){const B=n.exposed||(n.exposed={});J.forEach(X=>{Object.defineProperty(B,X,{get:()=>e[X],set:mt=>e[X]=mt})})}else n.exposed||(n.exposed={});A&&n.render===me&&(n.render=A),lt!=null&&(n.inheritAttrs=lt),rt&&(n.components=rt),et&&(n.directives=et)}function bd(n,t,e=me){Q(n)&&(n=ao(n));for(const i in n){const s=n[i];let r;bt(s)?"default"in s?r=Xe(s.from||i,s.default,!0):r=Xe(s.from||i):r=Xe(s),Xt(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function il(n,t,e){pe(Q(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function uh(n,t,e,i){const s=i.includes(".")?rh(e,i):()=>e[i];if(Dt(n)){const r=t[n];nt(r)&&Ds(s,r)}else if(nt(n))Ds(s,n.bind(e));else if(bt(n))if(Q(n))n.forEach(r=>uh(r,t,e,i));else{const r=nt(n.handler)?n.handler.bind(e):t[n.handler];nt(r)&&Ds(s,r,n)}}function Zo(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!e&&!i?l=t:(l={},s.length&&s.forEach(h=>js(l,h,o,!0)),js(l,t,o)),bt(t)&&r.set(t,l),l}function js(n,t,e,i=!1){const{mixins:s,extends:r}=t;r&&js(n,r,e,!0),s&&s.forEach(o=>js(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=Td[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const Td={data:sl,props:rl,emits:rl,methods:Oi,computed:Oi,beforeCreate:Yt,created:Yt,beforeMount:Yt,mounted:Yt,beforeUpdate:Yt,updated:Yt,beforeDestroy:Yt,beforeUnmount:Yt,destroyed:Yt,unmounted:Yt,activated:Yt,deactivated:Yt,errorCaptured:Yt,serverPrefetch:Yt,components:Oi,directives:Oi,watch:Ld,provide:sl,inject:Ad};function sl(n,t){return t?n?function(){return Mt(nt(n)?n.call(this,this):n,nt(t)?t.call(this,this):t)}:t:n}function Ad(n,t){return Oi(ao(n),ao(t))}function ao(n){if(Q(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Yt(n,t){return n?[...new Set([].concat(n,t))]:t}function Oi(n,t){return n?Mt(Object.create(null),n,t):t}function rl(n,t){return n?Q(n)&&Q(t)?[...new Set([...n,...t])]:Mt(Object.create(null),nl(n),nl(t??{})):t}function Ld(n,t){if(!n)return t;if(!t)return n;const e=Mt(Object.create(null),n);for(const i in t)e[i]=Yt(n[i],t[i]);return e}function fh(){return{app:null,config:{isNativeTag:Ju,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Md=0;function Od(n,t){return function(i,s=null){nt(i)||(i=Mt({},i)),s!=null&&!bt(s)&&(s=null);const r=fh(),o=new Set;let a=!1;const l=r.app={_uid:Md++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:ag,get config(){return r.config},set config(h){},use(h,...c){return o.has(h)||(h&&nt(h.install)?(o.add(h),h.install(l,...c)):nt(h)&&(o.add(h),h(l,...c))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,c){return c?(r.components[h]=c,l):r.components[h]},directive(h,c){return c?(r.directives[h]=c,l):r.directives[h]},mount(h,c,u){if(!a){const f=Zt(i,s);return f.appContext=r,c&&t?t(f,h):n(f,h,u),a=!0,l._container=h,h.__vue_app__=l,ta(f.component)||f.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(h,c){return r.provides[h]=c,l},runWithContext(h){Ks=l;try{return h()}finally{Ks=null}}};return l}}let Ks=null;function Ns(n,t){if(Pt){let e=Pt.provides;const i=Pt.parent&&Pt.parent.provides;i===e&&(e=Pt.provides=Object.create(i)),e[n]=t}}function Xe(n,t,e=!1){const i=Pt||ge;if(i||Ks){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Ks._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return e&&nt(t)?t.call(i&&i.proxy):t}}function Pd(n,t,e,i=!1){const s={},r={};zs(r,Cr,1),n.propsDefaults=Object.create(null),dh(n,t,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=i?s:Yc(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function Fd(n,t,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=ft(s),[l]=n.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=n.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(yr(n.emitsOptions,f))continue;const d=t[f];if(l)if(at(r,f))d!==r[f]&&(r[f]=d,h=!0);else{const g=Ae(f);s[g]=lo(l,a,g,d,n,!1)}else d!==r[f]&&(r[f]=d,h=!0)}}}else{dh(n,t,s,r)&&(h=!0);let c;for(const u in a)(!t||!at(t,u)&&((c=pi(u))===u||!at(t,c)))&&(l?e&&(e[u]!==void 0||e[c]!==void 0)&&(s[u]=lo(l,a,u,void 0,n,!0)):delete s[u]);if(r!==a)for(const u in r)(!t||!at(t,u))&&(delete r[u],h=!0)}h&&Ve(n,"set","$attrs")}function dh(n,t,e,i){const[s,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(Fs(l))continue;const h=t[l];let c;s&&at(s,c=Ae(l))?!r||!r.includes(c)?e[c]=h:(a||(a={}))[c]=h:yr(n.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,o=!0)}if(r){const l=ft(e),h=a||xt;for(let c=0;c<r.length;c++){const u=r[c];e[u]=lo(s,l,u,h[u],n,!at(h,u))}}return o}function lo(n,t,e,i,s,r){const o=n[e];if(o!=null){const a=at(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&nt(l)){const{propsDefaults:h}=s;e in h?i=h[e]:(ri(s),i=h[e]=l.call(null,t),An())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===pi(e))&&(i=!0))}return i}function gh(n,t,e=!1){const i=t.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!nt(n)){const c=u=>{l=!0;const[f,d]=gh(u,t,!0);Mt(o,f),d&&a.push(...d)};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!r&&!l)return bt(n)&&i.set(n,qn),qn;if(Q(r))for(let c=0;c<r.length;c++){const u=Ae(r[c]);ol(u)&&(o[u]=xt)}else if(r)for(const c in r){const u=Ae(c);if(ol(u)){const f=r[c],d=o[u]=Q(f)||nt(f)?{type:f}:Mt({},f);if(d){const g=cl(Boolean,d.type),m=cl(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||at(d,"default"))&&a.push(u)}}}const h=[o,a];return bt(n)&&i.set(n,h),h}function ol(n){return n[0]!=="$"}function al(n){const t=n&&n.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:n===null?"null":""}function ll(n,t){return al(n)===al(t)}function cl(n,t){return Q(t)?t.findIndex(e=>ll(e,n)):nt(t)&&ll(t,n)?0:-1}const _h=n=>n[0]==="_"||n==="$stable",qo=n=>Q(n)?n.map(Ce):[Ce(n)],Dd=(n,t,e)=>{if(t._n)return t;const i=nd((...s)=>qo(t(...s)),e);return i._c=!1,i},mh=(n,t,e)=>{const i=n._ctx;for(const s in n){if(_h(s))continue;const r=n[s];if(nt(r))t[s]=Dd(s,r,i);else if(r!=null){const o=qo(r);t[s]=()=>o}}},ph=(n,t)=>{const e=qo(t);n.slots.default=()=>e},kd=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=ft(t),zs(t,"_",e)):mh(t,n.slots={})}else n.slots={},t&&ph(n,t);zs(n.slots,Cr,1)},Nd=(n,t,e)=>{const{vnode:i,slots:s}=n;let r=!0,o=xt;if(i.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:(Mt(s,t),!e&&a===1&&delete s._):(r=!t.$stable,mh(t,s)),o=t}else t&&(ph(n,t),o={default:1});if(r)for(const a in s)!_h(a)&&!(a in o)&&delete s[a]};function co(n,t,e,i,s=!1){if(Q(n)){n.forEach((f,d)=>co(f,t&&(Q(t)?t[d]:t),e,i,s));return}if(ks(i)&&!s)return;const r=i.shapeFlag&4?ta(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=n,h=t&&t.r,c=a.refs===xt?a.refs={}:a.refs,u=a.setupState;if(h!=null&&h!==l&&(Dt(h)?(c[h]=null,at(u,h)&&(u[h]=null)):Xt(h)&&(h.value=null)),nt(l))hn(l,a,12,[o,c]);else{const f=Dt(l),d=Xt(l);if(f||d){const g=()=>{if(n.f){const m=f?at(u,l)?u[l]:c[l]:l.value;s?Q(m)&&ko(m,r):Q(m)?m.includes(r)||m.push(r):f?(c[l]=[r],at(u,l)&&(u[l]=c[l])):(l.value=[r],n.k&&(c[n.k]=l.value))}else f?(c[l]=o,at(u,l)&&(u[l]=o)):d&&(l.value=o,n.k&&(c[n.k]=o))};o?(g.id=-1,Vt(g,e)):g()}}}const Vt=ld;function Gd(n){return Wd(n)}function Wd(n,t){const e=Qr();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:f,setScopeId:d=me,insertStaticContent:g}=n,m=(_,p,x,R=null,I=null,b=null,G=!1,P=null,F=!!p.dynamicChildren)=>{if(_===p)return;_&&!Ii(_,p)&&(R=w(_),O(_,I,b,!0),_=null),p.patchFlag===-2&&(F=!1,p.dynamicChildren=null);const{type:T,ref:K,shapeFlag:z}=p;switch(T){case xr:E(_,p,x,R);break;case Ki:y(_,p,x,R);break;case Gs:_==null&&C(p,x,R,G);break;case ze:rt(_,p,x,R,I,b,G,P,F);break;default:z&1?A(_,p,x,R,I,b,G,P,F):z&6?et(_,p,x,R,I,b,G,P,F):(z&64||z&128)&&T.process(_,p,x,R,I,b,G,P,F,D)}K!=null&&I&&co(K,_&&_.ref,b,p||_,!p)},E=(_,p,x,R)=>{if(_==null)i(p.el=a(p.children),x,R);else{const I=p.el=_.el;p.children!==_.children&&h(I,p.children)}},y=(_,p,x,R)=>{_==null?i(p.el=l(p.children||""),x,R):p.el=_.el},C=(_,p,x,R)=>{[_.el,_.anchor]=g(_.children,p,x,R,_.el,_.anchor)},S=({el:_,anchor:p},x,R)=>{let I;for(;_&&_!==p;)I=f(_),i(_,x,R),_=I;i(p,x,R)},v=({el:_,anchor:p})=>{let x;for(;_&&_!==p;)x=f(_),s(_),_=x;s(p)},A=(_,p,x,R,I,b,G,P,F)=>{G=G||p.type==="svg",_==null?L(p,x,R,I,b,G,P,F):q(_,p,I,b,G,P,F)},L=(_,p,x,R,I,b,G,P)=>{let F,T;const{type:K,props:z,shapeFlag:Y,transition:$,dirs:tt}=_;if(F=_.el=o(_.type,b,z&&z.is,z),Y&8?c(F,_.children):Y&16&&N(_.children,F,null,R,I,b&&K!=="foreignObject",G,P),tt&&yn(_,null,R,"created"),k(F,_,_.scopeId,G,R),z){for(const ot in z)ot!=="value"&&!Fs(ot)&&r(F,ot,null,z[ot],b,_.children,R,I,At);"value"in z&&r(F,"value",null,z.value),(T=z.onVnodeBeforeMount)&&xe(T,R,_)}tt&&yn(_,null,R,"beforeMount");const ut=(!I||I&&!I.pendingBranch)&&$&&!$.persisted;ut&&$.beforeEnter(F),i(F,p,x),((T=z&&z.onVnodeMounted)||ut||tt)&&Vt(()=>{T&&xe(T,R,_),ut&&$.enter(F),tt&&yn(_,null,R,"mounted")},I)},k=(_,p,x,R,I)=>{if(x&&d(_,x),R)for(let b=0;b<R.length;b++)d(_,R[b]);if(I){let b=I.subTree;if(p===b){const G=I.vnode;k(_,G,G.scopeId,G.slotScopeIds,I.parent)}}},N=(_,p,x,R,I,b,G,P,F=0)=>{for(let T=F;T<_.length;T++){const K=_[T]=P?en(_[T]):Ce(_[T]);m(null,K,p,x,R,I,b,G,P)}},q=(_,p,x,R,I,b,G)=>{const P=p.el=_.el;let{patchFlag:F,dynamicChildren:T,dirs:K}=p;F|=_.patchFlag&16;const z=_.props||xt,Y=p.props||xt;let $;x&&En(x,!1),($=Y.onVnodeBeforeUpdate)&&xe($,x,p,_),K&&yn(p,_,x,"beforeUpdate"),x&&En(x,!0);const tt=I&&p.type!=="foreignObject";if(T?J(_.dynamicChildren,T,P,x,R,tt,b):G||X(_,p,P,null,x,R,tt,b,!1),F>0){if(F&16)lt(P,p,z,Y,x,R,I);else if(F&2&&z.class!==Y.class&&r(P,"class",null,Y.class,I),F&4&&r(P,"style",z.style,Y.style,I),F&8){const ut=p.dynamicProps;for(let ot=0;ot<ut.length;ot++){const vt=ut[ot],jt=z[vt],Oe=Y[vt];(Oe!==jt||vt==="value")&&r(P,vt,jt,Oe,I,_.children,x,R,At)}}F&1&&_.children!==p.children&&c(P,p.children)}else!G&&T==null&&lt(P,p,z,Y,x,R,I);(($=Y.onVnodeUpdated)||K)&&Vt(()=>{$&&xe($,x,p,_),K&&yn(p,_,x,"updated")},R)},J=(_,p,x,R,I,b,G)=>{for(let P=0;P<p.length;P++){const F=_[P],T=p[P],K=F.el&&(F.type===ze||!Ii(F,T)||F.shapeFlag&70)?u(F.el):x;m(F,T,K,null,R,I,b,G,!0)}},lt=(_,p,x,R,I,b,G)=>{if(x!==R){if(x!==xt)for(const P in x)!Fs(P)&&!(P in R)&&r(_,P,x[P],null,G,p.children,I,b,At);for(const P in R){if(Fs(P))continue;const F=R[P],T=x[P];F!==T&&P!=="value"&&r(_,P,T,F,G,p.children,I,b,At)}"value"in R&&r(_,"value",x.value,R.value)}},rt=(_,p,x,R,I,b,G,P,F)=>{const T=p.el=_?_.el:a(""),K=p.anchor=_?_.anchor:a("");let{patchFlag:z,dynamicChildren:Y,slotScopeIds:$}=p;$&&(P=P?P.concat($):$),_==null?(i(T,x,R),i(K,x,R),N(p.children,x,K,I,b,G,P,F)):z>0&&z&64&&Y&&_.dynamicChildren?(J(_.dynamicChildren,Y,x,I,b,G,P),(p.key!=null||I&&p===I.subTree)&&yh(_,p,!0)):X(_,p,x,K,I,b,G,P,F)},et=(_,p,x,R,I,b,G,P,F)=>{p.slotScopeIds=P,_==null?p.shapeFlag&512?I.ctx.activate(p,x,R,G,F):Tt(p,x,R,I,b,G,F):H(_,p,F)},Tt=(_,p,x,R,I,b,G)=>{const P=_.component=Jd(_,R,I);if(ah(_)&&(P.ctx.renderer=D),Qd(P),P.asyncDep){if(I&&I.registerDep(P,V),!_.el){const F=P.subTree=Zt(Ki);y(null,F,p,x)}return}V(P,_,p,x,I,b,G)},H=(_,p,x)=>{const R=p.component=_.component;if(rd(_,p,x))if(R.asyncDep&&!R.asyncResolved){B(R,p,x);return}else R.next=p,Jf(R.update),R.update();else p.el=_.el,R.vnode=p},V=(_,p,x,R,I,b,G)=>{const P=()=>{if(_.isMounted){let{next:K,bu:z,u:Y,parent:$,vnode:tt}=_,ut=K,ot;En(_,!1),K?(K.el=tt.el,B(_,K,G)):K=tt,z&&Fr(z),(ot=K.props&&K.props.onVnodeBeforeUpdate)&&xe(ot,$,K,tt),En(_,!0);const vt=Dr(_),jt=_.subTree;_.subTree=vt,m(jt,vt,u(jt.el),w(jt),_,I,b),K.el=vt.el,ut===null&&od(_,vt.el),Y&&Vt(Y,I),(ot=K.props&&K.props.onVnodeUpdated)&&Vt(()=>xe(ot,$,K,tt),I)}else{let K;const{el:z,props:Y}=p,{bm:$,m:tt,parent:ut}=_,ot=ks(p);if(En(_,!1),$&&Fr($),!ot&&(K=Y&&Y.onVnodeBeforeMount)&&xe(K,ut,p),En(_,!0),z&&ct){const vt=()=>{_.subTree=Dr(_),ct(z,_.subTree,_,I,null)};ot?p.type.__asyncLoader().then(()=>!_.isUnmounted&&vt()):vt()}else{const vt=_.subTree=Dr(_);m(null,vt,x,R,_,I,b),p.el=vt.el}if(tt&&Vt(tt,I),!ot&&(K=Y&&Y.onVnodeMounted)){const vt=p;Vt(()=>xe(K,ut,vt),I)}(p.shapeFlag&256||ut&&ks(ut.vnode)&&ut.vnode.shapeFlag&256)&&_.a&&Vt(_.a,I),_.isMounted=!0,p=x=R=null}},F=_.effect=new Xo(P,()=>$o(T),_.scope),T=_.update=()=>F.run();T.id=_.uid,En(_,!0),T()},B=(_,p,x)=>{p.component=_;const R=_.vnode.props;_.vnode=p,_.next=null,Fd(_,p.props,R,x),Nd(_,p.children,x),yi(),Qa(),Ei()},X=(_,p,x,R,I,b,G,P,F=!1)=>{const T=_&&_.children,K=_?_.shapeFlag:0,z=p.children,{patchFlag:Y,shapeFlag:$}=p;if(Y>0){if(Y&128){pt(T,z,x,R,I,b,G,P,F);return}else if(Y&256){mt(T,z,x,R,I,b,G,P,F);return}}$&8?(K&16&&At(T,I,b),z!==T&&c(x,z)):K&16?$&16?pt(T,z,x,R,I,b,G,P,F):At(T,I,b,!0):(K&8&&c(x,""),$&16&&N(z,x,R,I,b,G,P,F))},mt=(_,p,x,R,I,b,G,P,F)=>{_=_||qn,p=p||qn;const T=_.length,K=p.length,z=Math.min(T,K);let Y;for(Y=0;Y<z;Y++){const $=p[Y]=F?en(p[Y]):Ce(p[Y]);m(_[Y],$,x,null,I,b,G,P,F)}T>K?At(_,I,b,!0,!1,z):N(p,x,R,I,b,G,P,F,z)},pt=(_,p,x,R,I,b,G,P,F)=>{let T=0;const K=p.length;let z=_.length-1,Y=K-1;for(;T<=z&&T<=Y;){const $=_[T],tt=p[T]=F?en(p[T]):Ce(p[T]);if(Ii($,tt))m($,tt,x,null,I,b,G,P,F);else break;T++}for(;T<=z&&T<=Y;){const $=_[z],tt=p[Y]=F?en(p[Y]):Ce(p[Y]);if(Ii($,tt))m($,tt,x,null,I,b,G,P,F);else break;z--,Y--}if(T>z){if(T<=Y){const $=Y+1,tt=$<K?p[$].el:R;for(;T<=Y;)m(null,p[T]=F?en(p[T]):Ce(p[T]),x,tt,I,b,G,P,F),T++}}else if(T>Y)for(;T<=z;)O(_[T],I,b,!0),T++;else{const $=T,tt=T,ut=new Map;for(T=tt;T<=Y;T++){const kt=p[T]=F?en(p[T]):Ce(p[T]);kt.key!=null&&ut.set(kt.key,T)}let ot,vt=0;const jt=Y-tt+1;let Oe=!1,Dn=0;const pn=new Array(jt);for(T=0;T<jt;T++)pn[T]=0;for(T=$;T<=z;T++){const kt=_[T];if(vt>=jt){O(kt,I,b,!0);continue}let Qt;if(kt.key!=null)Qt=ut.get(kt.key);else for(ot=tt;ot<=Y;ot++)if(pn[ot-tt]===0&&Ii(kt,p[ot])){Qt=ot;break}Qt===void 0?O(kt,I,b,!0):(pn[Qt-tt]=T+1,Qt>=Dn?Dn=Qt:Oe=!0,m(kt,p[Qt],x,null,I,b,G,P,F),vt++)}const ms=Oe?Bd(pn):qn;for(ot=ms.length-1,T=jt-1;T>=0;T--){const kt=tt+T,Qt=p[kt],kn=kt+1<K?p[kt+1].el:R;pn[T]===0?m(null,Qt,x,kn,I,b,G,P,F):Oe&&(ot<0||T!==ms[ot]?St(Qt,x,kn,2):ot--)}}},St=(_,p,x,R,I=null)=>{const{el:b,type:G,transition:P,children:F,shapeFlag:T}=_;if(T&6){St(_.component.subTree,p,x,R);return}if(T&128){_.suspense.move(p,x,R);return}if(T&64){G.move(_,p,x,D);return}if(G===ze){i(b,p,x);for(let z=0;z<F.length;z++)St(F[z],p,x,R);i(_.anchor,p,x);return}if(G===Gs){S(_,p,x);return}if(R!==2&&T&1&&P)if(R===0)P.beforeEnter(b),i(b,p,x),Vt(()=>P.enter(b),I);else{const{leave:z,delayLeave:Y,afterLeave:$}=P,tt=()=>i(b,p,x),ut=()=>{z(b,()=>{tt(),$&&$()})};Y?Y(b,tt,ut):ut()}else i(b,p,x)},O=(_,p,x,R=!1,I=!1)=>{const{type:b,props:G,ref:P,children:F,dynamicChildren:T,shapeFlag:K,patchFlag:z,dirs:Y}=_;if(P!=null&&co(P,null,x,_,!0),K&256){p.ctx.deactivate(_);return}const $=K&1&&Y,tt=!ks(_);let ut;if(tt&&(ut=G&&G.onVnodeBeforeUnmount)&&xe(ut,p,_),K&6)ae(_.component,x,R);else{if(K&128){_.suspense.unmount(x,R);return}$&&yn(_,null,p,"beforeUnmount"),K&64?_.type.remove(_,p,x,I,D,R):T&&(b!==ze||z>0&&z&64)?At(T,p,x,!1,!0):(b===ze&&z&384||!I&&K&16)&&At(F,p,x),R&&Me(_)}(tt&&(ut=G&&G.onVnodeUnmounted)||$)&&Vt(()=>{ut&&xe(ut,p,_),$&&yn(_,null,p,"unmounted")},x)},Me=_=>{const{type:p,el:x,anchor:R,transition:I}=_;if(p===ze){Ot(x,R);return}if(p===Gs){v(_);return}const b=()=>{s(x),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(_.shapeFlag&1&&I&&!I.persisted){const{leave:G,delayLeave:P}=I,F=()=>G(x,b);P?P(_.el,b,F):F()}else b()},Ot=(_,p)=>{let x;for(;_!==p;)x=f(_),s(_),_=x;s(p)},ae=(_,p,x)=>{const{bum:R,scope:I,update:b,subTree:G,um:P}=_;R&&Fr(R),I.stop(),b&&(b.active=!1,O(G,_,p,x)),P&&Vt(P,p),Vt(()=>{_.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},At=(_,p,x,R=!1,I=!1,b=0)=>{for(let G=b;G<_.length;G++)O(_[G],p,x,R,I)},w=_=>_.shapeFlag&6?w(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el),W=(_,p,x)=>{_==null?p._vnode&&O(p._vnode,null,null,!0):m(p._vnode||null,_,p,null,null,null,x),Qa(),th(),p._vnode=_},D={p:m,um:O,m:St,r:Me,mt:Tt,mc:N,pc:X,pbc:J,n:w,o:n};let j,ct;return t&&([j,ct]=t(D)),{render:W,hydrate:j,createApp:Od(W,j)}}function En({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function yh(n,t,e=!1){const i=n.children,s=t.children;if(Q(i)&&Q(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=en(s[r]),a.el=o.el),e||yh(o,a)),a.type===xr&&(a.el=o.el)}}function Bd(n){const t=n.slice(),e=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const h=n[i];if(h!==0){if(s=e[e.length-1],n[s]<h){t[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<h?r=a+1:o=a;h<n[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}const zd=n=>n.__isTeleport,ze=Symbol.for("v-fgt"),xr=Symbol.for("v-txt"),Ki=Symbol.for("v-cmt"),Gs=Symbol.for("v-stc"),Gi=[];let _e=null;function Eh(n=!1){Gi.push(_e=n?null:[])}function Xd(){Gi.pop(),_e=Gi[Gi.length-1]||null}let Vi=1;function hl(n){Vi+=n}function xh(n){return n.dynamicChildren=Vi>0?_e||qn:null,Xd(),Vi>0&&_e&&_e.push(n),n}function Yd(n,t,e,i,s,r){return xh(ei(n,t,e,i,s,r,!0))}function jd(n,t,e,i,s){return xh(Zt(n,t,e,i,s,!0))}function ho(n){return n?n.__v_isVNode===!0:!1}function Ii(n,t){return n.type===t.type&&n.key===t.key}const Cr="__vInternal",Ch=({key:n})=>n??null,Ws=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Dt(n)||Xt(n)||nt(n)?{i:ge,r:n,k:t,f:!!e}:n:null);function ei(n,t=null,e=null,i=0,s=null,r=n===ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Ch(t),ref:t&&Ws(t),scopeId:ih,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ge};return a?(Jo(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=Dt(e)?8:16),Vi>0&&!o&&_e&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_e.push(l),l}const Zt=Kd;function Kd(n,t=null,e=null,i=0,s=null,r=!1){if((!n||n===Rd)&&(n=Ki),ho(n)){const a=si(n,t,!0);return e&&Jo(a,e),Vi>0&&!r&&_e&&(a.shapeFlag&6?_e[_e.indexOf(n)]=a:_e.push(a)),a.patchFlag|=-2,a}if(sg(n)&&(n=n.__vccOpts),t){t=Vd(t);let{class:a,style:l}=t;a&&!Dt(a)&&(t.class=Bo(a)),bt(l)&&(Kc(l)&&!Q(l)&&(l=Mt({},l)),t.style=Wo(l))}const o=Dt(n)?1:ad(n)?128:zd(n)?64:bt(n)?4:nt(n)?2:0;return ei(n,t,e,i,s,o,r,!0)}function Vd(n){return n?Kc(n)||Cr in n?Mt({},n):n:null}function si(n,t,e=!1){const{props:i,ref:s,patchFlag:r,children:o}=n,a=t?$d(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Ch(a),ref:t&&t.ref?e&&s?Q(s)?s.concat(Ws(t)):[s,Ws(t)]:Ws(t):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==ze?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&si(n.ssContent),ssFallback:n.ssFallback&&si(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Hd(n=" ",t=0){return Zt(xr,null,n,t)}function Ud(n,t){const e=Zt(Gs,null,n);return e.staticCount=t,e}function Ce(n){return n==null||typeof n=="boolean"?Zt(Ki):Q(n)?Zt(ze,null,n.slice()):typeof n=="object"?en(n):Zt(xr,null,String(n))}function en(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:si(n)}function Jo(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Q(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Jo(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!(Cr in t)?t._ctx=ge:s===3&&ge&&(ge.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else nt(t)?(t={default:t,_ctx:ge},e=32):(t=String(t),i&64?(e=16,t=[Hd(t)]):e=8);n.children=t,n.shapeFlag|=e}function $d(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Bo([t.class,i.class]));else if(s==="style")t.style=Wo([t.style,i.style]);else if(ur(s)){const r=t[s],o=i[s];o&&r!==o&&!(Q(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function xe(n,t,e,i=null){pe(n,t,7,[e,i])}const Zd=fh();let qd=0;function Jd(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||Zd,r={uid:qd++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new _f(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gh(i,s),emitsOptions:nh(i,s),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:i.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ed.bind(null,r),n.ce&&n.ce(r),r}let Pt=null,Qo,Gn,ul="__VUE_INSTANCE_SETTERS__";(Gn=Qr()[ul])||(Gn=Qr()[ul]=[]),Gn.push(n=>Pt=n),Qo=n=>{Gn.length>1?Gn.forEach(t=>t(n)):Gn[0](n)};const ri=n=>{Qo(n),n.scope.on()},An=()=>{Pt&&Pt.scope.off(),Qo(null)};function vh(n){return n.vnode.shapeFlag&4}let Hi=!1;function Qd(n,t=!1){Hi=t;const{props:e,children:i}=n.vnode,s=vh(n);Pd(n,e,s,t),kd(n,i);const r=s?tg(n,t):void 0;return Hi=!1,r}function tg(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=Vc(new Proxy(n.ctx,Sd));const{setup:i}=e;if(i){const s=n.setupContext=i.length>1?ng(n):null;ri(n),yi();const r=hn(i,n,0,[n.props,s]);if(Ei(),An(),Mc(r)){if(r.then(An,An),t)return r.then(o=>{fl(n,o,t)}).catch(o=>{pr(o,n,0)});n.asyncDep=r}else fl(n,r,t)}else Rh(n,t)}function fl(n,t,e){nt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:bt(t)&&(n.setupState=Zc(t)),Rh(n,e)}let dl;function Rh(n,t,e){const i=n.type;if(!n.render){if(!t&&dl&&!i.render){const s=i.template||Zo(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,h=Mt(Mt({isCustomElement:r,delimiters:a},o),l);i.render=dl(s,h)}}n.render=i.render||me}ri(n),yi(),Id(n),Ei(),An()}function eg(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(t,e){return Jt(n,"get","$attrs"),t[e]}}))}function ng(n){const t=e=>{n.exposed=e||{}};return{get attrs(){return eg(n)},slots:n.slots,emit:n.emit,expose:t}}function ta(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Zc(Vc(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ni)return Ni[e](n)},has(t,e){return e in t||e in Ni}}))}function ig(n,t=!0){return nt(n)?n.displayName||n.name:n.name||t&&n.__name}function sg(n){return nt(n)&&"__vccOpts"in n}const de=(n,t)=>$f(n,t,Hi);function wh(n,t,e){const i=arguments.length;return i===2?bt(t)&&!Q(t)?ho(t)?Zt(n,null,[t]):Zt(n,t):Zt(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&ho(e)&&(e=[e]),Zt(n,t,e))}const rg=Symbol.for("v-scx"),og=()=>Xe(rg),ag="3.3.4",lg="http://www.w3.org/2000/svg",wn=typeof document<"u"?document:null,gl=wn&&wn.createElement("template"),cg={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t?wn.createElementNS(lg,n):wn.createElement(n,e?{is:e}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>wn.createTextNode(n),createComment:n=>wn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>wn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,r){const o=e?e.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{gl.innerHTML=i?`<svg>${n}</svg>`:n;const a=gl.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function hg(n,t,e){const i=n._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}function ug(n,t,e){const i=n.style,s=Dt(e);if(e&&!s){if(t&&!Dt(t))for(const r in t)e[r]==null&&uo(i,r,"");for(const r in e)uo(i,r,e[r])}else{const r=i.display;s?t!==e&&(i.cssText=e):t&&n.removeAttribute("style"),"_vod"in n&&(i.display=r)}}const _l=/\s*!important$/;function uo(n,t,e){if(Q(e))e.forEach(i=>uo(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=fg(n,t);_l.test(e)?n.setProperty(pi(i),e.replace(_l,""),"important"):n[i]=e}}const ml=["Webkit","Moz","ms"],Nr={};function fg(n,t){const e=Nr[t];if(e)return e;let i=Ae(t);if(i!=="filter"&&i in n)return Nr[t]=i;i=gr(i);for(let s=0;s<ml.length;s++){const r=ml[s]+i;if(r in n)return Nr[t]=r}return t}const pl="http://www.w3.org/1999/xlink";function dg(n,t,e,i,s){if(i&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(pl,t.slice(6,t.length)):n.setAttributeNS(pl,t,e);else{const r=gf(t);e==null||r&&!Oc(e)?n.removeAttribute(t):n.setAttribute(t,r?"":e)}}function gg(n,t,e,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),n[t]=e??"";return}const a=n.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=e;const h=a==="OPTION"?n.getAttribute("value"):n.value,c=e??"";h!==c&&(n.value=c),e==null&&n.removeAttribute(t);return}let l=!1;if(e===""||e==null){const h=typeof n[t];h==="boolean"?e=Oc(e):e==null&&h==="string"?(e="",l=!0):h==="number"&&(e=0,l=!0)}try{n[t]=e}catch{}l&&n.removeAttribute(t)}function _g(n,t,e,i){n.addEventListener(t,e,i)}function mg(n,t,e,i){n.removeEventListener(t,e,i)}function pg(n,t,e,i,s=null){const r=n._vei||(n._vei={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=yg(t);if(i){const h=r[t]=Cg(i,s);_g(n,a,h,l)}else o&&(mg(n,a,o,l),r[t]=void 0)}}const yl=/(?:Once|Passive|Capture)$/;function yg(n){let t;if(yl.test(n)){t={};let i;for(;i=n.match(yl);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):pi(n.slice(2)),t]}let Gr=0;const Eg=Promise.resolve(),xg=()=>Gr||(Eg.then(()=>Gr=0),Gr=Date.now());function Cg(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;pe(vg(i,e.value),t,5,[i])};return e.value=n,e.attached=xg(),e}function vg(n,t){if(Q(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const El=/^on[a-z]/,Rg=(n,t,e,i,s=!1,r,o,a,l)=>{t==="class"?hg(n,i,s):t==="style"?ug(n,e,i):ur(t)?Do(t)||pg(n,t,e,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wg(n,t,i,s))?gg(n,t,i,r,o,a,l):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),dg(n,t,i,s))};function wg(n,t,e,i){return i?!!(t==="innerHTML"||t==="textContent"||t in n&&El.test(t)&&nt(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||El.test(t)&&Dt(e)?!1:t in n}const Sg=Mt({patchProp:Rg},cg);let xl;function Ig(){return xl||(xl=Gd(Sg))}const bg=(...n)=>{const t=Ig().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=Tg(i);if(!s)return;const r=t._component;!nt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=e(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Tg(n){return Dt(n)?document.querySelector(n):n}const Sh=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e},Ag={};function Lg(n,t){const e=vd("router-view");return Eh(),jd(e)}const Mg=Sh(Ag,[["render",Lg]]);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Xn=typeof window<"u";function Og(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const _t=Object.assign;function Wr(n,t){const e={};for(const i in t){const s=t[i];e[i]=ye(s)?s.map(n):n(s)}return e}const Wi=()=>{},ye=Array.isArray,Pg=/\/$/,Fg=n=>n.replace(Pg,"");function Br(n,t,e="/"){let i,s={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),s=n(r)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=Gg(i??t,e),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function Dg(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Cl(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function kg(n,t,e){const i=t.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&oi(t.matched[i],e.matched[s])&&Ih(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function oi(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function Ih(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!Ng(n[e],t[e]))return!1;return!0}function Ng(n,t){return ye(n)?vl(n,t):ye(t)?vl(t,n):n===t}function vl(n,t){return ye(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function Gg(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Ui;(function(n){n.pop="pop",n.push="push"})(Ui||(Ui={}));var Bi;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Bi||(Bi={}));function Wg(n){if(!n)if(Xn){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Fg(n)}const Bg=/^[^#]+#/;function zg(n,t){return n.replace(Bg,"#")+t}function Xg(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const vr=()=>({left:window.pageXOffset,top:window.pageYOffset});function Yg(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;t=Xg(s,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Rl(n,t){return(history.state?history.state.position-t:-1)+n}const fo=new Map;function jg(n,t){fo.set(n,t)}function Kg(n){const t=fo.get(n);return fo.delete(n),t}let Vg=()=>location.protocol+"//"+location.host;function bh(n,t){const{pathname:e,search:i,hash:s}=t,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Cl(l,"")}return Cl(e,n)+i+s}function Hg(n,t,e,i){let s=[],r=[],o=null;const a=({state:f})=>{const d=bh(n,location),g=e.value,m=t.value;let E=0;if(f){if(e.value=d,t.value=f,o&&o===g){o=null;return}E=m?f.position-m.position:0}else i(d);s.forEach(y=>{y(e.value,g,{delta:E,type:Ui.pop,direction:E?E>0?Bi.forward:Bi.back:Bi.unknown})})};function l(){o=e.value}function h(f){s.push(f);const d=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return r.push(d),d}function c(){const{history:f}=window;f.state&&f.replaceState(_t({},f.state,{scroll:vr()}),"")}function u(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function wl(n,t,e,i=!1,s=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:s?vr():null}}function Ug(n){const{history:t,location:e}=window,i={value:bh(n,e)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,h,c){const u=n.indexOf("#"),f=u>-1?(e.host&&document.querySelector("base")?n:n.slice(u))+l:Vg()+n+l;try{t[c?"replaceState":"pushState"](h,"",f),s.value=h}catch(d){console.error(d),e[c?"replace":"assign"](f)}}function o(l,h){const c=_t({},t.state,wl(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});r(l,c,!0),i.value=l}function a(l,h){const c=_t({},s.value,t.state,{forward:l,scroll:vr()});r(c.current,c,!0);const u=_t({},wl(i.value,l,null),{position:c.position+1},h);r(l,u,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function $g(n){n=Wg(n);const t=Ug(n),e=Hg(n,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const s=_t({location:"",base:n,go:i,createHref:zg.bind(null,n)},t,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Zg(n){return typeof n=="string"||n&&typeof n=="object"}function Th(n){return typeof n=="string"||typeof n=="symbol"}const $e={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ah=Symbol("");var Sl;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Sl||(Sl={}));function ai(n,t){return _t(new Error,{type:n,[Ah]:!0},t)}function De(n,t){return n instanceof Error&&Ah in n&&(t==null||!!(n.type&t))}const Il="[^/]+?",qg={sensitive:!1,strict:!1,start:!0,end:!0},Jg=/[.+*?^${}()[\]/\\]/g;function Qg(n,t){const e=_t({},qg,t),i=[];let s=e.start?"^":"";const r=[];for(const h of n){const c=h.length?[]:[90];e.strict&&!h.length&&(s+="/");for(let u=0;u<h.length;u++){const f=h[u];let d=40+(e.sensitive?.25:0);if(f.type===0)u||(s+="/"),s+=f.value.replace(Jg,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:m,optional:E,regexp:y}=f;r.push({name:g,repeatable:m,optional:E});const C=y||Il;if(C!==Il){d+=10;try{new RegExp(`(${C})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${C}): `+v.message)}}let S=m?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;u||(S=E&&h.length<2?`(?:/${S})`:"/"+S),E&&(S+="?"),s+=S,d+=20,E&&(d+=-8),m&&(d+=-20),C===".*"&&(d+=-50)}c.push(d)}i.push(c)}if(e.strict&&e.end){const h=i.length-1;i[h][i[h].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&(s+="(?:/|$)");const o=new RegExp(s,e.sensitive?"":"i");function a(h){const c=h.match(o),u={};if(!c)return null;for(let f=1;f<c.length;f++){const d=c[f]||"",g=r[f-1];u[g.name]=d&&g.repeatable?d.split("/"):d}return u}function l(h){let c="",u=!1;for(const f of n){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const d of f)if(d.type===0)c+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:E}=d,y=g in h?h[g]:"";if(ye(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const C=ye(y)?y.join("/"):y;if(!C)if(E)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);c+=C}}return c||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function t_(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===40+40?-1:1:n.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function e_(n,t){let e=0;const i=n.score,s=t.score;for(;e<i.length&&e<s.length;){const r=t_(i[e],s[e]);if(r)return r;e++}if(Math.abs(s.length-i.length)===1){if(bl(i))return 1;if(bl(s))return-1}return s.length-i.length}function bl(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const n_={type:0,value:""},i_=/[a-zA-Z0-9_]/;function s_(n){if(!n)return[[]];if(n==="/")return[[n_]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(d){throw new Error(`ERR (${e})/"${h}": ${d}`)}let e=0,i=e;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,h="",c="";function u(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:l==="/"?(h&&u(),o()):l===":"?(u(),e=1):f();break;case 4:f(),e=i;break;case 1:l==="("?e=2:i_.test(l)?f():(u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),o(),s}function r_(n,t,e){const i=Qg(s_(n.path),e),s=_t(i,{record:n,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function o_(n,t){const e=[],i=new Map;t=Ll({strict:!1,end:!0,sensitive:!1},t);function s(c){return i.get(c)}function r(c,u,f){const d=!f,g=a_(c);g.aliasOf=f&&f.record;const m=Ll(t,c),E=[g];if("alias"in c){const S=typeof c.alias=="string"?[c.alias]:c.alias;for(const v of S)E.push(_t({},g,{components:f?f.record.components:g.components,path:v,aliasOf:f?f.record:g}))}let y,C;for(const S of E){const{path:v}=S;if(u&&v[0]!=="/"){const A=u.record.path,L=A[A.length-1]==="/"?"":"/";S.path=u.record.path+(v&&L+v)}if(y=r_(S,u,m),f?f.alias.push(y):(C=C||y,C!==y&&C.alias.push(y),d&&c.name&&!Al(y)&&o(c.name)),g.children){const A=g.children;for(let L=0;L<A.length;L++)r(A[L],y,f&&f.children[L])}f=f||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return C?()=>{o(C)}:Wi}function o(c){if(Th(c)){const u=i.get(c);u&&(i.delete(c),e.splice(e.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=e.indexOf(c);u>-1&&(e.splice(u,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return e}function l(c){let u=0;for(;u<e.length&&e_(c,e[u])>=0&&(c.record.path!==e[u].record.path||!Lh(c,e[u]));)u++;e.splice(u,0,c),c.record.name&&!Al(c)&&i.set(c.record.name,c)}function h(c,u){let f,d={},g,m;if("name"in c&&c.name){if(f=i.get(c.name),!f)throw ai(1,{location:c});m=f.record.name,d=_t(Tl(u.params,f.keys.filter(C=>!C.optional).map(C=>C.name)),c.params&&Tl(c.params,f.keys.map(C=>C.name))),g=f.stringify(d)}else if("path"in c)g=c.path,f=e.find(C=>C.re.test(g)),f&&(d=f.parse(g),m=f.record.name);else{if(f=u.name?i.get(u.name):e.find(C=>C.re.test(u.path)),!f)throw ai(1,{location:c,currentLocation:u});m=f.record.name,d=_t({},u.params,c.params),g=f.stringify(d)}const E=[];let y=f;for(;y;)E.unshift(y.record),y=y.parent;return{name:m,path:g,params:d,matched:E,meta:c_(E)}}return n.forEach(c=>r(c)),{addRoute:r,resolve:h,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Tl(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function a_(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:l_(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function l_(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function Al(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function c_(n){return n.reduce((t,e)=>_t(t,e.meta),{})}function Ll(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function Lh(n,t){return t.children.some(e=>e===n||Lh(n,e))}const Mh=/#/g,h_=/&/g,u_=/\//g,f_=/=/g,d_=/\?/g,Oh=/\+/g,g_=/%5B/g,__=/%5D/g,Ph=/%5E/g,m_=/%60/g,Fh=/%7B/g,p_=/%7C/g,Dh=/%7D/g,y_=/%20/g;function ea(n){return encodeURI(""+n).replace(p_,"|").replace(g_,"[").replace(__,"]")}function E_(n){return ea(n).replace(Fh,"{").replace(Dh,"}").replace(Ph,"^")}function go(n){return ea(n).replace(Oh,"%2B").replace(y_,"+").replace(Mh,"%23").replace(h_,"%26").replace(m_,"`").replace(Fh,"{").replace(Dh,"}").replace(Ph,"^")}function x_(n){return go(n).replace(f_,"%3D")}function C_(n){return ea(n).replace(Mh,"%23").replace(d_,"%3F")}function v_(n){return n==null?"":C_(n).replace(u_,"%2F")}function Vs(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function R_(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Oh," "),o=r.indexOf("="),a=Vs(o<0?r:r.slice(0,o)),l=o<0?null:Vs(r.slice(o+1));if(a in t){let h=t[a];ye(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function Ml(n){let t="";for(let e in n){const i=n[e];if(e=x_(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(ye(i)?i.map(r=>r&&go(r)):[i&&go(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function w_(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=ye(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const S_=Symbol(""),Ol=Symbol(""),na=Symbol(""),kh=Symbol(""),_o=Symbol("");function bi(){let n=[];function t(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function nn(n,t,e,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(ai(4,{from:e,to:t})):u instanceof Error?a(u):Zg(u)?a(ai(2,{from:t,to:u})):(r&&i.enterCallbacks[s]===r&&typeof u=="function"&&r.push(u),o())},h=n.call(i&&i.instances[s],t,e,l);let c=Promise.resolve(h);n.length<3&&(c=c.then(l)),c.catch(u=>a(u))})}function zr(n,t,e,i){const s=[];for(const r of n)for(const o in r.components){let a=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(I_(a)){const h=(a.__vccOpts||a)[t];h&&s.push(nn(h,e,i,r,o))}else{let l=a();s.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const c=Og(h)?h.default:h;r.components[o]=c;const f=(c.__vccOpts||c)[t];return f&&nn(f,e,i,r,o)()}))}}return s}function I_(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Pl(n){const t=Xe(na),e=Xe(kh),i=de(()=>t.resolve(Qn(n.to))),s=de(()=>{const{matched:l}=i.value,{length:h}=l,c=l[h-1],u=e.matched;if(!c||!u.length)return-1;const f=u.findIndex(oi.bind(null,c));if(f>-1)return f;const d=Fl(l[h-2]);return h>1&&Fl(c)===d&&u[u.length-1].path!==d?u.findIndex(oi.bind(null,l[h-2])):f}),r=de(()=>s.value>-1&&L_(e.params,i.value.params)),o=de(()=>s.value>-1&&s.value===e.matched.length-1&&Ih(e.params,i.value.params));function a(l={}){return A_(l)?t[Qn(n.replace)?"replace":"push"](Qn(n.to)).catch(Wi):Promise.resolve()}return{route:i,href:de(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const b_=oh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Pl,setup(n,{slots:t}){const e=mr(Pl(n)),{options:i}=Xe(na),s=de(()=>({[Dl(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Dl(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&t.default(e);return n.custom?r:wh("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},r)}}}),T_=b_;function A_(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function L_(n,t){for(const e in t){const i=t[e],s=n[e];if(typeof i=="string"){if(i!==s)return!1}else if(!ye(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Fl(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Dl=(n,t,e)=>n??t??e,M_=oh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=Xe(_o),s=de(()=>n.route||i.value),r=Xe(Ol,0),o=de(()=>{let h=Qn(r);const{matched:c}=s.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),a=de(()=>s.value.matched[o.value]);Ns(Ol,de(()=>o.value+1)),Ns(S_,a),Ns(_o,s);const l=jf();return Ds(()=>[l.value,a.value,n.name],([h,c,u],[f,d,g])=>{c&&(c.instances[u]=h,d&&d!==c&&h&&h===f&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),h&&c&&(!d||!oi(c,d)||!f)&&(c.enterCallbacks[u]||[]).forEach(m=>m(h))},{flush:"post"}),()=>{const h=s.value,c=n.name,u=a.value,f=u&&u.components[c];if(!f)return kl(e.default,{Component:f,route:h});const d=u.props[c],g=d?d===!0?h.params:typeof d=="function"?d(h):d:null,E=wh(f,_t({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return kl(e.default,{Component:E,route:h})||E}}});function kl(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const O_=M_;function P_(n){const t=o_(n.routes,n),e=n.parseQuery||R_,i=n.stringifyQuery||Ml,s=n.history,r=bi(),o=bi(),a=bi(),l=Kf($e);let h=$e;Xn&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Wr.bind(null,w=>""+w),u=Wr.bind(null,v_),f=Wr.bind(null,Vs);function d(w,W){let D,j;return Th(w)?(D=t.getRecordMatcher(w),j=W):j=w,t.addRoute(j,D)}function g(w){const W=t.getRecordMatcher(w);W&&t.removeRoute(W)}function m(){return t.getRoutes().map(w=>w.record)}function E(w){return!!t.getRecordMatcher(w)}function y(w,W){if(W=_t({},W||l.value),typeof w=="string"){const x=Br(e,w,W.path),R=t.resolve({path:x.path},W),I=s.createHref(x.fullPath);return _t(x,R,{params:f(R.params),hash:Vs(x.hash),redirectedFrom:void 0,href:I})}let D;if("path"in w)D=_t({},w,{path:Br(e,w.path,W.path).path});else{const x=_t({},w.params);for(const R in x)x[R]==null&&delete x[R];D=_t({},w,{params:u(x)}),W.params=u(W.params)}const j=t.resolve(D,W),ct=w.hash||"";j.params=c(f(j.params));const _=Dg(i,_t({},w,{hash:E_(ct),path:j.path})),p=s.createHref(_);return _t({fullPath:_,hash:ct,query:i===Ml?w_(w.query):w.query||{}},j,{redirectedFrom:void 0,href:p})}function C(w){return typeof w=="string"?Br(e,w,l.value.path):_t({},w)}function S(w,W){if(h!==w)return ai(8,{from:W,to:w})}function v(w){return k(w)}function A(w){return v(_t(C(w),{replace:!0}))}function L(w){const W=w.matched[w.matched.length-1];if(W&&W.redirect){const{redirect:D}=W;let j=typeof D=="function"?D(w):D;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=C(j):{path:j},j.params={}),_t({query:w.query,hash:w.hash,params:"path"in j?{}:w.params},j)}}function k(w,W){const D=h=y(w),j=l.value,ct=w.state,_=w.force,p=w.replace===!0,x=L(D);if(x)return k(_t(C(x),{state:typeof x=="object"?_t({},ct,x.state):ct,force:_,replace:p}),W||D);const R=D;R.redirectedFrom=W;let I;return!_&&kg(i,j,D)&&(I=ai(16,{to:R,from:j}),St(j,j,!0,!1)),(I?Promise.resolve(I):J(R,j)).catch(b=>De(b)?De(b,2)?b:pt(b):X(b,R,j)).then(b=>{if(b){if(De(b,2))return k(_t({replace:p},C(b.to),{state:typeof b.to=="object"?_t({},ct,b.to.state):ct,force:_}),W||R)}else b=rt(R,j,!0,p,ct);return lt(R,j,b),b})}function N(w,W){const D=S(w,W);return D?Promise.reject(D):Promise.resolve()}function q(w){const W=Ot.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(w):w()}function J(w,W){let D;const[j,ct,_]=F_(w,W);D=zr(j.reverse(),"beforeRouteLeave",w,W);for(const x of j)x.leaveGuards.forEach(R=>{D.push(nn(R,w,W))});const p=N.bind(null,w,W);return D.push(p),At(D).then(()=>{D=[];for(const x of r.list())D.push(nn(x,w,W));return D.push(p),At(D)}).then(()=>{D=zr(ct,"beforeRouteUpdate",w,W);for(const x of ct)x.updateGuards.forEach(R=>{D.push(nn(R,w,W))});return D.push(p),At(D)}).then(()=>{D=[];for(const x of _)if(x.beforeEnter)if(ye(x.beforeEnter))for(const R of x.beforeEnter)D.push(nn(R,w,W));else D.push(nn(x.beforeEnter,w,W));return D.push(p),At(D)}).then(()=>(w.matched.forEach(x=>x.enterCallbacks={}),D=zr(_,"beforeRouteEnter",w,W),D.push(p),At(D))).then(()=>{D=[];for(const x of o.list())D.push(nn(x,w,W));return D.push(p),At(D)}).catch(x=>De(x,8)?x:Promise.reject(x))}function lt(w,W,D){a.list().forEach(j=>q(()=>j(w,W,D)))}function rt(w,W,D,j,ct){const _=S(w,W);if(_)return _;const p=W===$e,x=Xn?history.state:{};D&&(j||p?s.replace(w.fullPath,_t({scroll:p&&x&&x.scroll},ct)):s.push(w.fullPath,ct)),l.value=w,St(w,W,D,p),pt()}let et;function Tt(){et||(et=s.listen((w,W,D)=>{if(!ae.listening)return;const j=y(w),ct=L(j);if(ct){k(_t(ct,{replace:!0}),j).catch(Wi);return}h=j;const _=l.value;Xn&&jg(Rl(_.fullPath,D.delta),vr()),J(j,_).catch(p=>De(p,12)?p:De(p,2)?(k(p.to,j).then(x=>{De(x,20)&&!D.delta&&D.type===Ui.pop&&s.go(-1,!1)}).catch(Wi),Promise.reject()):(D.delta&&s.go(-D.delta,!1),X(p,j,_))).then(p=>{p=p||rt(j,_,!1),p&&(D.delta&&!De(p,8)?s.go(-D.delta,!1):D.type===Ui.pop&&De(p,20)&&s.go(-1,!1)),lt(j,_,p)}).catch(Wi)}))}let H=bi(),V=bi(),B;function X(w,W,D){pt(w);const j=V.list();return j.length?j.forEach(ct=>ct(w,W,D)):console.error(w),Promise.reject(w)}function mt(){return B&&l.value!==$e?Promise.resolve():new Promise((w,W)=>{H.add([w,W])})}function pt(w){return B||(B=!w,Tt(),H.list().forEach(([W,D])=>w?D(w):W()),H.reset()),w}function St(w,W,D,j){const{scrollBehavior:ct}=n;if(!Xn||!ct)return Promise.resolve();const _=!D&&Kg(Rl(w.fullPath,0))||(j||!D)&&history.state&&history.state.scroll||null;return Jc().then(()=>ct(w,W,_)).then(p=>p&&Yg(p)).catch(p=>X(p,w,W))}const O=w=>s.go(w);let Me;const Ot=new Set,ae={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:E,getRoutes:m,resolve:y,options:n,push:v,replace:A,go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:mt,install(w){const W=this;w.component("RouterLink",T_),w.component("RouterView",O_),w.config.globalProperties.$router=W,Object.defineProperty(w.config.globalProperties,"$route",{enumerable:!0,get:()=>Qn(l)}),Xn&&!Me&&l.value===$e&&(Me=!0,v(s.location).catch(ct=>{}));const D={};for(const ct in $e)Object.defineProperty(D,ct,{get:()=>l.value[ct],enumerable:!0});w.provide(na,W),w.provide(kh,Yc(D)),w.provide(_o,l);const j=w.unmount;Ot.add(w),w.unmount=function(){Ot.delete(w),Ot.size<1&&(h=$e,et&&et(),et=null,l.value=$e,Me=!1,B=!1),j()}}};function At(w){return w.reduce((W,D)=>W.then(()=>q(D)),Promise.resolve())}return ae}function F_(n,t){const e=[],i=[],s=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(n.matched.find(h=>oi(h,a))?i.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(h=>oi(h,l))||s.push(l))}return[e,i,s]}class D_{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const gn=D_,li={PROPERTYCHANGE:"propertychange"};class k_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const ia=k_;function N_(n,t,e){let i,s;e=e||ci;let r=0,o=n.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+e(n[i],t),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function ci(n,t){return n>t?1:n<t?-1:0}function Nh(n,t,e){if(n[0]<=t)return 0;const i=n.length;if(t<=n[i-1])return i-1;if(typeof e=="function"){for(let s=1;s<i;++s){const r=n[s];if(r===t)return s;if(r<t)return e(t,n[s-1],r)>0?s-1:s}return i-1}if(e>0){for(let s=1;s<i;++s)if(n[s]<t)return s-1;return i-1}if(e<0){for(let s=1;s<i;++s)if(n[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==t)return s;if(n[s]<t)return n[s-1]-t<t-n[s]?s-1:s}return i-1}function G_(n,t,e){for(;t<e;){const i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function Ye(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let s=0;s<i;s++)n[n.length]=e[s]}function _n(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function $i(){return!0}function Rr(){return!1}function hi(){}function W_(n){let t=!1,e,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!_n(r,i))&&(t=!0,s=this,i=r,e=n.apply(this,arguments)),e}}function as(n){for(const t in n)delete n[t]}function ui(n){let t;for(t in n)return!1;return!t}class B_ extends ia{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=e?new gn(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let h=0,c=s.length;h<c;++h)if("handleEvent"in s[h]?l=s[h].handleEvent(r):l=s[h].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,hi);delete o[i]}return l}disposeInternal(){this.listeners_&&as(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const s=i.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=hi,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}}const sa=B_,st={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ht(n,t,e,i,s){if(i&&i!==n&&(e=e.bind(i)),s){const o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:n,type:t,listener:e};return n.addEventListener(t,e),r}function Nl(n,t,e,i){return ht(n,t,e,i,!0)}function wt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),as(n))}class wr extends sa{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(st.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ht(this,t[r],e);return s}return ht(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Nl(this,t[r],e)}else i=Nl(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)z_(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}wr.prototype.on;wr.prototype.once;wr.prototype.un;function z_(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)wt(n[t]);else wt(n)}const Gh=wr;function Z(){throw new Error("Unimplemented abstract method.")}let X_=0;function It(n){return n.ol_uid||(n.ol_uid=String(++X_))}class Gl extends gn{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class Y_ extends Gh{constructor(t){super(),this.on,this.once,this.un,It(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Gl(i,t,e)),i=li.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Gl(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const s=this.values_||(this.values_={});if(i)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],ui(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Le=Y_;function Ct(n,t){if(!n)throw new Error(t)}class ra extends Le{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new ra(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(wt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ht(t,st.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?j_(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function j_(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(Ct(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}const K_=ra,fn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",V_=fn.includes("firefox"),H_=fn.includes("safari")&&!fn.includes("chrom");H_&&(fn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(fn));const U_=fn.includes("webkit")&&!fn.includes("edge"),Wh=fn.includes("macintosh"),Bh=typeof devicePixelRatio<"u"?devicePixelRatio:1,oa=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,$_=typeof Image<"u"&&Image.prototype.decode,zh=function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();new Array(6);function be(){return[1,0,0,1,0,0]}function Z_(n,t,e,i,s,r,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n}function q_(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Wt(n,t){const e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function J_(n,t,e){return Z_(n,t,0,0,e,0,0)}function xi(n,t,e,i,s,r,o,a){const l=Math.sin(r),h=Math.cos(r);return n[0]=i*h,n[1]=s*l,n[2]=-i*l,n[3]=s*h,n[4]=o*i*h-a*i*l+t,n[5]=o*s*l+a*s*h+e,n}function Xh(n,t){const e=Q_(t);Ct(e!==0,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-s/e,n[2]=-r/e,n[3]=i/e,n[4]=(r*l-o*a)/e,n[5]=-(i*l-s*a)/e,n}function Q_(n){return n[0]*n[3]-n[1]*n[2]}let Wl;function tm(n){const t="matrix("+n.join(", ")+")";if(oa)return t;const e=Wl||(Wl=document.createElement("div"));return e.style.transform=t,e.style.transform}const Lt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function aa(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function Yh(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function Pn(n,t,e){let i,s;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?s=n[1]-e:n[3]<e?s=e-n[3]:s=0,i*i+s*s}function em(n,t){return la(n,t[0],t[1])}function Un(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function la(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function mo(n,t){const e=n[0],i=n[1],s=n[2],r=n[3],o=t[0],a=t[1];let l=Lt.UNKNOWN;return o<e?l=l|Lt.LEFT:o>s&&(l=l|Lt.RIGHT),a<i?l=l|Lt.BELOW:a>r&&(l=l|Lt.ABOVE),l===Lt.UNKNOWN&&(l=Lt.INTERSECTING),l}function dn(){return[1/0,1/0,-1/0,-1/0]}function fi(n,t,e,i,s){return s?(s[0]=n,s[1]=t,s[2]=e,s[3]=i,s):[n,t,e,i]}function ls(n){return fi(1/0,1/0,-1/0,-1/0,n)}function nm(n,t){const e=n[0],i=n[1];return fi(e,i,e,i,t)}function jh(n,t,e,i,s){const r=ls(s);return Kh(r,n,t,e,i)}function Hs(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function im(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function sm(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function Kh(n,t,e,i,s){for(;e<i;e+=s)rm(n,t[e],t[e+1]);return n}function rm(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function om(n,t){let e;return e=t(Vh(n)),e||(e=t(Hh(n)),e)||(e=t($h(n)),e)||(e=t(Uh(n)),e)?e:!1}function Vh(n){return[n[0],n[1]]}function Hh(n){return[n[2],n[1]]}function di(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function po(n,t,e,i,s){const[r,o,a,l,h,c,u,f]=am(n,t,e,i);return fi(Math.min(r,a,h,u),Math.min(o,l,c,f),Math.max(r,a,h,u),Math.max(o,l,c,f),s)}function am(n,t,e,i){const s=t*i[0]/2,r=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=s*o,h=s*a,c=r*o,u=r*a,f=n[0],d=n[1];return[f-l+u,d-h-c,f-l-u,d-h+c,f+l-u,d+h+c,f+l+u,d+h-c,f-l+u,d-h-c]}function Zi(n){return n[3]-n[1]}function lm(n,t,e){const i=e||dn();return oe(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):ls(i),i}function Uh(n){return[n[0],n[3]]}function $h(n){return[n[2],n[3]]}function ie(n){return n[2]-n[0]}function oe(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function ca(n){return n[2]<n[0]||n[3]<n[1]}function cm(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function hm(n,t,e){let i=!1;const s=mo(n,t),r=mo(n,e);if(s===Lt.INTERSECTING||r===Lt.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],h=n[3],c=t[0],u=t[1],f=e[0],d=e[1],g=(d-u)/(f-c);let m,E;r&Lt.ABOVE&&!(s&Lt.ABOVE)&&(m=f-(d-h)/g,i=m>=o&&m<=l),!i&&r&Lt.RIGHT&&!(s&Lt.RIGHT)&&(E=d-(f-l)*g,i=E>=a&&E<=h),!i&&r&Lt.BELOW&&!(s&Lt.BELOW)&&(m=f-(d-a)/g,i=m>=o&&m<=l),!i&&r&Lt.LEFT&&!(s&Lt.LEFT)&&(E=d-(f-o)*g,i=E>=a&&E<=h)}return i}function Zh(n,t){const e=t.getExtent(),i=di(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const s=ie(e),o=Math.floor((i[0]-e[0])/s)*s;n[0]-=o,n[2]-=o}return n}function um(n,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];Zh(n,t);const i=ie(e);if(ie(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}const qh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class fm{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Jh=fm,cs=6378137,$n=Math.PI*cs,dm=[-$n,-$n,$n,$n],gm=[-180,-85,180,85],Ss=cs*Math.log(Math.tan(Math.PI/2));class Wn extends Jh{constructor(t){super({code:t,units:"m",extent:dm,global:!0,worldExtent:gm,getPointResolution:function(e,i){return e/Math.cosh(i[1]/cs)}})}}const Bl=[new Wn("EPSG:3857"),new Wn("EPSG:102100"),new Wn("EPSG:102113"),new Wn("EPSG:900913"),new Wn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Wn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _m(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let s=0;s<i;s+=e){t[s]=$n*n[s]/180;let r=cs*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>Ss?r=Ss:r<-Ss&&(r=-Ss),t[s+1]=r}return t}function mm(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let s=0;s<i;s+=e)t[s]=180*n[s]/$n,t[s+1]=360*Math.atan(Math.exp(n[s+1]/cs))/Math.PI-90;return t}const pm=6378137,zl=[-180,-90,180,90],ym=Math.PI*pm/180;class xn extends Jh{constructor(t,e){super({code:t,units:"degrees",extent:zl,axisOrientation:e,global:!0,metersPerUnit:ym,worldExtent:zl})}}const Xl=[new xn("CRS:84"),new xn("EPSG:4326","neu"),new xn("urn:ogc:def:crs:OGC:1.3:CRS84"),new xn("urn:ogc:def:crs:OGC:2:84"),new xn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new xn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let yo={};function Em(n){return yo[n]||yo[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function xm(n,t){yo[n]=t}let ni={};function Us(n,t,e){const i=n.getCode(),s=t.getCode();i in ni||(ni[i]={}),ni[i][s]=e}function Cm(n,t){let e;return n in ni&&t in ni[n]&&(e=ni[n][t]),e}function Ft(n,t,e){return Math.min(Math.max(n,t),e)}function vm(n,t,e,i,s,r){const o=s-e,a=r-i;if(o!==0||a!==0){const l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=s,i=r):l>0&&(e+=o*l,i+=a*l)}return Ln(n,t,e,i)}function Ln(n,t,e,i){const s=e-n,r=i-t;return s*s+r*r}function Rm(n){return n*Math.PI/180}function Yl(n,t){const e=n%t;return e*t<0?e+t:e}function ne(n,t,e){return n+e*(t-n)}function wm(n,t){const e=Math.pow(10,t);return Math.round(n*e)/e}function Sm(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function $s(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function ha(n,t){const e=Math.cos(t),i=Math.sin(t),s=n[0]*e-n[1]*i,r=n[1]*e+n[0]*i;return n[0]=s,n[1]=r,n}function Im(n,t){return n[0]*=t,n[1]*=t,n}function Qh(n,t){if(t.canWrapX()){const e=ie(t.getExtent()),i=bm(n,t,e);i&&(n[0]-=i*e)}return n}function bm(n,t,e){const i=t.getExtent();let s=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||ie(i),s=Math.floor((n[0]-i[0])/e)),s}const tu={info:1,warn:2,error:3,none:4};let Tm=tu.info;function eu(...n){Tm>tu.warn||console.warn(...n)}let Eo=!0;function Am(n){Eo=!(n===void 0?!0:n)}function ua(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Lm(n,t){if(t!==void 0&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function Mm(n){xm(n.getCode(),n),Us(n,n,ua)}function Om(n){n.forEach(Mm)}function qt(n){return typeof n=="string"?Em(n):n||null}function jl(n){Om(n),n.forEach(function(t){n.forEach(function(e){t!==e&&Us(t,e,ua)})})}function Pm(n,t,e,i){n.forEach(function(s){t.forEach(function(r){Us(s,r,e),Us(r,s,i)})})}function fa(n,t){return n?typeof n=="string"?qt(n):n:qt(t)}function Fm(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||nu(n,t)===ua)&&e}function nu(n,t){const e=n.getCode(),i=t.getCode();let s=Cm(e,i);return s||(s=Lm),s}function Kl(n,t){const e=qt(n),i=qt(t);return nu(e,i)}function xo(n,t){return n}function Ge(n,t){return Eo&&!$s(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Eo=!1,eu("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function iu(n,t){return n}function Pi(n,t){return n}function Dm(){jl(Bl),jl(Xl),Pm(Xl,Bl,_m,mm)}Dm();function Mn(n,t,e,i,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=i){const l=n[a],h=n[a+1];r[o++]=s[0]*l+s[2]*h+s[4],r[o++]=s[1]*l+s[3]*h+s[5]}return r&&r.length!=o&&(r.length=o),r}function su(n,t,e,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),h=r[0],c=r[1];let u=0;for(let f=t;f<e;f+=i){const d=n[f]-h,g=n[f+1]-c;o[u++]=h+d*a-g*l,o[u++]=c+d*l+g*a;for(let m=f+2;m<f+i;++m)o[u++]=n[m]}return o&&o.length!=u&&(o.length=u),o}function km(n,t,e,i,s,r,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let u=t;u<e;u+=i){const f=n[u]-l,d=n[u+1]-h;a[c++]=l+s*f,a[c++]=h+r*d;for(let g=u+2;g<u+i;++g)a[c++]=n[g]}return a&&a.length!=c&&(a.length=c),a}function Nm(n,t,e,i,s,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=n[l]+s,o[a++]=n[l+1]+r;for(let h=l+2;h<l+i;++h)o[a++]=n[h]}return o&&o.length!=a&&(o.length=a),o}const Vl=be();class Gm extends Le{constructor(){super(),this.extent_=dn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=W_(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Z()}closestPointXY(t,e,i,s){return Z()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Z()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ls(e),this.extentRevision_=this.getRevision()}return cm(this.extent_,t)}rotate(t,e){Z()}scale(t,e,i){Z()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Z()}getType(){return Z()}applyTransform(t){Z()}intersectsExtent(t){return Z()}translate(t,e){Z()}transform(t,e){const i=qt(t),s=i.getUnits()=="tile-pixels"?function(r,o,a){const l=i.getExtent(),h=i.getWorldExtent(),c=Zi(h)/Zi(l);return xi(Vl,h[0],h[3],c,-c,0,0,0),Mn(r,0,r.length,a,Vl,o),Kl(i,e)(r,o,a)}:Kl(i,e);return this.applyTransform(s),this}}const ru=Gm;class Zs extends ru{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(wt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ht(this.geometries_[t],st.CHANGE,this.changed,this))}clone(){const t=new Zs(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Pn(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){ls(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)im(t,e[i].getExtent());return t}getGeometries(){return Hl(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}if(s){const r=new Zs(null);return r.setGeometriesArray(e),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=di(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Hl(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Hl(n){const t=[];for(let e=0,i=n.length;e<i;++e)t.push(n[e].clone());return t}const Wm=Zs;class Bm{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?qt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=qt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Z()}readFeature(t,e){return Z()}readFeatures(t,e){return Z()}readGeometry(t,e){return Z()}readProjection(t){return Z()}writeFeature(t,e){return Z()}writeFeatures(t,e){return Z()}writeGeometry(t,e){return Z()}}function ou(n,t,e){const i=e?qt(e.featureProjection):null,s=e?qt(e.dataProjection):null;let r;if(i&&s&&!Fm(i,s)?r=(t?n.clone():n).transform(t?i:s,t?s:i):r=n,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let h=0,c=l.length;h<c;++h)l[h]=Math.round(l[h]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}class zm extends Bm{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Is(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Is(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Z()}readFeaturesFromObject(t,e){return Z()}readGeometry(t,e){return this.readGeometryFromObject(Is(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Z()}readProjection(t){return this.readProjectionFromObject(Is(t))}readProjectionFromObject(t){return Z()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Z()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Z()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Z()}}function Is(n){if(typeof n=="string"){const t=JSON.parse(n);return t||null}return n!==null?n:null}const Xm=zm;class Ym extends ru{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return jh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Z()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Ul(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Z()}setLayout(t,e,i){let s;if(t)s=Ul(t);else{for(let r=0;r<i;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=jm(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();su(i,0,i.length,s,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=di(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();km(s,0,s.length,r,t,e,i,s),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Nm(i,0,i.length,s,t,e,i),this.changed()}}}function jm(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Ul(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function Km(n,t,e){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return Mn(i,0,i.length,s,t,e)}const Fn=Ym;function $l(n,t,e,i,s,r,o){const a=n[t],l=n[t+1],h=n[e]-a,c=n[e+1]-l;let u;if(h===0&&c===0)u=t;else{const f=((s-a)*h+(r-l)*c)/(h*h+c*c);if(f>1)u=e;else if(f>0){for(let d=0;d<i;++d)o[d]=ne(n[t+d],n[e+d],f);o.length=i;return}else u=t}for(let f=0;f<i;++f)o[f]=n[u+f];o.length=i}function da(n,t,e,i,s){let r=n[t],o=n[t+1];for(t+=i;t<e;t+=i){const a=n[t],l=n[t+1],h=Ln(r,o,a,l);h>s&&(s=h),r=a,o=l}return s}function ga(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=da(n,t,a,i,s),t=a}return s}function Vm(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=ga(n,t,a,i,s),t=a[a.length-1]}return s}function _a(n,t,e,i,s,r,o,a,l,h,c){if(t==e)return h;let u,f;if(s===0){if(f=Ln(o,a,n[t],n[t+1]),f<h){for(u=0;u<i;++u)l[u]=n[t+u];return l.length=i,f}return h}c=c||[NaN,NaN];let d=t+i;for(;d<e;)if($l(n,d-i,d,i,o,a,c),f=Ln(o,a,c[0],c[1]),f<h){for(h=f,u=0;u<i;++u)l[u]=c[u];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(h))/s|0,1);if(r&&($l(n,e-i,t,i,o,a,c),f=Ln(o,a,c[0],c[1]),f<h)){for(h=f,u=0;u<i;++u)l[u]=c[u];l.length=i}return h}function ma(n,t,e,i,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,f=e.length;u<f;++u){const d=e[u];h=_a(n,t,d,i,s,r,o,a,l,h,c),t=d}return h}function Hm(n,t,e,i,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,f=e.length;u<f;++u){const d=e[u];h=ma(n,t,d,i,s,r,o,a,l,h,c),t=d[d.length-1]}return h}function Um(n,t,e,i){for(let s=0,r=e.length;s<r;++s)n[t++]=e[s];return t}function Sr(n,t,e,i){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<i;++a)n[t++]=o[a]}return t}function pa(n,t,e,i,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=Sr(n,t,e[o],i);s[r++]=l,t=l}return s.length=r,s}function $m(n,t,e,i,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=pa(n,t,e[o],i,s[r]);l.length===0&&(l[0]=t),s[r++]=l,t=l[l.length-1]}return s.length=r,s}function ya(n,t,e,i,s,r,o){const a=(e-t)/i;if(a<3){for(;t<e;t+=i)r[o++]=n[t],r[o++]=n[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,e-i];let c=0;for(;h.length>0;){const u=h.pop(),f=h.pop();let d=0;const g=n[f],m=n[f+1],E=n[u],y=n[u+1];for(let C=f+i;C<u;C+=i){const S=n[C],v=n[C+1],A=vm(S,v,g,m,E,y);A>d&&(c=C,d=A)}d>s&&(l[(c-t)/i]=1,f+i<c&&h.push(f,c),c+i<u&&h.push(c,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=n[t+u*i],r[o++]=n[t+u*i+1]);return o}function Zm(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l];o=ya(n,t,c,i,s,r,o),a.push(o),t=c}return o}function vn(n,t){return t*Math.round(n/t)}function qm(n,t,e,i,s,r,o){if(t==e)return o;let a=vn(n[t],s),l=vn(n[t+1],s);t+=i,r[o++]=a,r[o++]=l;let h,c;do if(h=vn(n[t],s),c=vn(n[t+1],s),t+=i,t==e)return r[o++]=h,r[o++]=c,o;while(h==a&&c==l);for(;t<e;){const u=vn(n[t],s),f=vn(n[t+1],s);if(t+=i,u==h&&f==c)continue;const d=h-a,g=c-l,m=u-a,E=f-l;if(d*E==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&E<g||g==E||g>0&&E>g)){h=u,c=f;continue}r[o++]=h,r[o++]=c,a=h,l=c,h=u,c=f}return r[o++]=h,r[o++]=c,o}function au(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l];o=qm(n,t,c,i,s,r,o),a.push(o),t=c}return o}function Jm(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l],u=[];o=au(n,t,c,i,s,r,o,u),a.push(u),t=c[c.length-1]}return o}function lu(n,t,e,i,s){let r;for(t+=i;t<e;t+=i)if(r=s(n.slice(t-i,t),n.slice(t,t+i)),r)return r;return!1}function on(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function qi(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=on(n,t,l,i,s[r]),t=l}return s.length=r,s}function Co(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=l.length===1&&l[0]===t?[]:qi(n,t,l,i,s[r]),t=l[l.length-1]}return s.length=r,s}function cu(n,t,e,i,s,r,o){let a,l;const h=(e-t)/i;if(h===1)a=t;else if(h===2)a=t,l=s;else if(h!==0){let c=n[t],u=n[t+1],f=0;const d=[0];for(let E=t+i;E<e;E+=i){const y=n[E],C=n[E+1];f+=Math.sqrt((y-c)*(y-c)+(C-u)*(C-u)),d.push(f),c=y,u=C}const g=s*f,m=N_(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=a===void 0?NaN:l===void 0?n[a+c]:ne(n[a+c],n[a+i+c],l);return r}function vo(n,t,e,i,s,r){if(e==t)return null;let o;if(s<n[t+i-1])return r?(o=n.slice(t,t+i),o[i-1]=s,o):null;if(n[e-1]<s)return r?(o=n.slice(e-i,e),o[i-1]=s,o):null;if(s==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const f=a+l>>1;s<n[(f+1)*i-1]?l=f:a=f+1}const h=n[a*i-1];if(s==h)return n.slice((a-1)*i,(a-1)*i+i);const c=n[(a+1)*i-1],u=(s-h)/(c-h);o=[];for(let f=0;f<i-1;++f)o.push(ne(n[(a-1)*i+f],n[a*i+f],u));return o.push(s),o}function Qm(n,t,e,i,s,r,o){if(o)return vo(n,t,e[e.length-1],i,s,r);let a;if(s<n[i-1])return r?(a=n.slice(0,i),a[i-1]=s,a):null;if(n[n.length-1]<s)return r?(a=n.slice(n.length-i),a[i-1]=s,a):null;for(let l=0,h=e.length;l<h;++l){const c=e[l];if(t!=c){if(s<n[t+i-1])return null;if(s<=n[c-1])return vo(n,t,c,i,s,!1);t=c}}return null}function tp(n,t,e,i,s){return!om(s,function(o){return!Sn(n,t,e,i,o[0],o[1])})}function Sn(n,t,e,i,s,r){let o=0,a=n[e-i],l=n[e-i+1];for(;t<e;t+=i){const h=n[t],c=n[t+1];l<=r?c>r&&(h-a)*(r-l)-(s-a)*(c-l)>0&&o++:c<=r&&(h-a)*(r-l)-(s-a)*(c-l)<0&&o--,a=h,l=c}return o!==0}function Ea(n,t,e,i,s,r){if(e.length===0||!Sn(n,t,e[0],i,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(Sn(n,e[o-1],e[o],i,s,r))return!1;return!0}function ep(n,t,e,i,s,r){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const l=e[o];if(Ea(n,t,l,i,s,r))return!0;t=l[l.length-1]}return!1}function Ir(n,t,e,i,s){const r=Kh(dn(),n,t,e,i);return oe(s,r)?Un(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:lu(n,t,e,i,function(o,a){return hm(s,o,a)}):!1}function np(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){if(Ir(n,t,e[r],i,s))return!0;t=e[r]}return!1}function ip(n,t,e,i,s){return!!(Ir(n,t,e,i,s)||Sn(n,t,e,i,s[0],s[1])||Sn(n,t,e,i,s[0],s[3])||Sn(n,t,e,i,s[2],s[1])||Sn(n,t,e,i,s[2],s[3]))}function hu(n,t,e,i,s){if(!ip(n,t,e[0],i,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(tp(n,e[r-1],e[r],i,s)&&!Ir(n,e[r-1],e[r],i,s))return!1;return!0}function sp(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(hu(n,t,a,i,s))return!0;t=a[a.length-1]}return!1}function uu(n,t,e,i){let s=n[t],r=n[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=n[a],h=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(h-r)*(h-r)),s=l,r=h}return o}class qs extends Fn{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?Ye(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new qs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Pn(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(da(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return lu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=ya(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new qs(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Ir(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sr(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ro=qs;class Js extends Fn{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){const c=r[l];l===0&&(s=c.getLayout()),Ye(o,c.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Ye(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Js(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Pn(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ga(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ma(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,Qm(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return qi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ro(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],h=new Ro(t.slice(r,l),i);s.push(h),r=l}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],h=cu(e,i,l,r,.5);Ye(t,h),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Zm(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Js(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return np(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=pa(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const rp=Js;class xa extends Fn{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new xa(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){const r=this.flatCoordinates,o=Ln(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return nm(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return la(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Um(this.flatCoordinates,0,t,this.stride),this.changed()}}const Qs=xa;class Ca extends Fn{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?Ye(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Ca(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Pn(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const h=Ln(t,e,r[a],r[a+1]);if(h<s){s=h;for(let c=0;c<o;++c)i[c]=r[a+c];i.length=o}}return s}getCoordinates(){return on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Qs(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){const a=new Qs(t.slice(r,r+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,r=e.length;s<r;s+=i){const o=e[s],a=e[s+1];if(la(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sr(this.flatCoordinates,0,t,this.stride),this.changed()}}const fu=Ca;function du(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function gu(n,t,e,i){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=du(n,t,a,i),t=a}return s}function op(n,t,e,i){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=gu(n,t,a,i),t=a[a.length-1]}return s}class tr extends Fn{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new tr(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,s){return s<Pn(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(da(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))}getArea(){return du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=ya(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new tr(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sr(this.flatCoordinates,0,t,this.stride),this.changed()}}const Zl=tr;function _u(n,t,e,i,s,r,o){let a,l,h,c,u,f,d;const g=s[r+1],m=[];for(let C=0,S=e.length;C<S;++C){const v=e[C];for(c=n[v-i],f=n[v-i+1],a=t;a<v;a+=i)u=n[a],d=n[a+1],(g<=f&&d<=g||f<=g&&g<=d)&&(h=(g-f)/(d-f)*(u-c)+c,m.push(h)),c=u,f=d}let E=NaN,y=-1/0;for(m.sort(ci),c=m[0],a=1,l=m.length;a<l;++a){u=m[a];const C=Math.abs(u-c);C>y&&(h=(c+u)/2,Ea(n,t,e,i,h,g)&&(E=h,y=C)),c=u}return isNaN(E)&&(E=s[r]),o?(o.push(E,g,y),o):[E,g,y]}function ap(n,t,e,i,s){let r=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];r=_u(n,t,l,i,s,2*o,r),t=l[l.length-1]}return r}function lp(n,t,e,i){for(;t<e-i;){for(let s=0;s<i;++s){const r=n[t+s];n[t+s]=n[e-i+s],n[e-i+s]=r}t+=i,e-=i}}function mu(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function pu(n,t,e,i,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=mu(n,t,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function cp(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(!pu(n,t,a,i,s))return!1;a.length&&(t=a[a.length-1])}return!0}function wo(n,t,e,i,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=mu(n,t,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&lp(n,t,a,i),t=a}return t}function ql(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r)t=wo(n,t,e[r],i,s);return t}class Ji extends Fn{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Ye(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ji(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Pn(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ga(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ma(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return Ea(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return gu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),wo(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,qi(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=di(this.getExtent());this.flatInteriorPoint_=_u(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qs(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Zl(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],h=new Zl(e.slice(r,l),t);s.push(h),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;pu(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=wo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=au(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Ji(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return hu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=pa(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const er=Ji;function Jl(n){if(ca(n))throw new Error("Cannot create polygon from empty extent");const t=n[0],e=n[1],i=n[2],s=n[3],r=[t,e,t,s,i,s,i,e,t,e];return new Ji(r,"XY",[r.length])}function hp(n,t,e,i){const s=[];let r=dn();for(let o=0,a=e.length;o<a;++o){const l=e[o];r=jh(n,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}class nr extends Fn{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){const c=r[l];l===0&&(s=c.getLayout());const u=o.length,f=c.getEnds();for(let d=0,g=f.length;d<g;++d)f[d]+=u;Ye(o,c.getFlatCoordinates()),a.push(f)}e=s,t=o,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Ye(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new nr(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<Pn(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vm(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return ep(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return op(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ql(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Co(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=hp(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ap(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new fu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;cp(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ql(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Jm(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new nr(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=e;return new er(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),h=l[l.length-1];if(r!==0)for(let u=0,f=l.length;u<f;++u)l[u]-=r;const c=new er(e.slice(r,h),t,l);s.push(c),r=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return sp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=$m(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const up=nr;class fp extends Xm{constructor(t){t=t||{},super(),this.dataProjection=qt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=qt(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=So(i.geometry,e),r=new K_;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){const i=t;let s=null;if(i.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],e))}else s=[this.readFeatureFromObject(t,e)];return s}readGeometryFromObject(t,e){return So(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=qt(e.properties.name);else if(e.type==="EPSG")i=qt("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Io(o,e),delete r[t.getGeometryName()]),ui(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Io(t,this.adaptOptions(e))}}function So(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=gp(n);break}case"LineString":{e=_p(n);break}case"Polygon":{e=Ep(n);break}case"MultiPoint":{e=pp(n);break}case"MultiLineString":{e=mp(n);break}case"MultiPolygon":{e=yp(n);break}case"GeometryCollection":{e=dp(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return ou(e,!1,t)}function dp(n,t){const e=n.geometries.map(function(i){return So(i,t)});return new Wm(e)}function gp(n){return new Qs(n.coordinates)}function _p(n){return new Ro(n.coordinates)}function mp(n){return new rp(n.coordinates)}function pp(n){return new fu(n.coordinates)}function yp(n){return new up(n.coordinates)}function Ep(n){return new er(n.coordinates)}function Io(n,t){n=ou(n,!0,t);const e=n.getType();let i;switch(e){case"Point":{i=Sp(n);break}case"LineString":{i=Cp(n);break}case"Polygon":{i=Ip(n,t);break}case"MultiPoint":{i=Rp(n);break}case"MultiLineString":{i=vp(n);break}case"MultiPolygon":{i=wp(n,t);break}case"GeometryCollection":{i=xp(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function xp(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return Io(i,t)})}}function Cp(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function vp(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Rp(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function wp(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function Sp(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function Ip(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}const bp=fp,Ht={ADD:"add",REMOVE:"remove"},Ql={LENGTH:"length"};class bs extends gn{constructor(t,e,i){super(t),this.element=e,this.index=i}}class Tp extends Le{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Ql.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new bs(Ht.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new bs(Ht.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new bs(Ht.REMOVE,s,t)),this.dispatchEvent(new bs(Ht.ADD,e,t))}updateLength_(){this.set(Ql.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}const Se=Tp,Ap=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Lp=/^([a-z]*)$|^hsla?\(.*\)$/i;function yu(n){return typeof n=="string"?n:Eu(n)}function Mp(n){const t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const Op=function(){const t={};let e=0;return function(i){let s;if(t.hasOwnProperty(i))s=t[i];else{if(e>=1024){let r=0;for(const o in t)r++&3||(delete t[o],--e)}s=Pp(i),t[i]=s,++e}return s}}();function ir(n){return Array.isArray(n)?n:Op(n)}function Pp(n){let t,e,i,s,r;if(Lp.exec(n)&&(n=Mp(n)),Ap.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?s=parseInt(n.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(s=(s<<4)+s)),r=[t,e,i,s/255]}else if(n.startsWith("rgba("))r=n.slice(5,-1).split(",").map(Number),tc(r);else if(n.startsWith("rgb("))r=n.slice(4,-1).split(",").map(Number),r.push(1),tc(r);else throw new Error("Invalid color");return r}function tc(n){return n[0]=Ft(n[0]+.5|0,0,255),n[1]=Ft(n[1]+.5|0,0,255),n[2]=Ft(n[2]+.5|0,0,255),n[3]=Ft(n[3],0,1),n}function Eu(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const s=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+i+","+s+")"}class Fp{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];!(t++&3)&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const s=ec(t,e,i);return s in this.cache_?this.cache_[s]:null}set(t,e,i,s){const r=ec(t,e,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function ec(n,t,e){const i=e?yu(e):"null";return t+":"+n+":"+i}const sr=new Fp,gt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Dp extends Le{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[gt.OPACITY]=t.opacity!==void 0?t.opacity:1,Ct(typeof e[gt.OPACITY]=="number","Layer opacity must be a number"),e[gt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[gt.Z_INDEX]=t.zIndex,e[gt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[gt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[gt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[gt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=Ft(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Z()}getLayerStatesArray(t){return Z()}getExtent(){return this.get(gt.EXTENT)}getMaxResolution(){return this.get(gt.MAX_RESOLUTION)}getMinResolution(){return this.get(gt.MIN_RESOLUTION)}getMinZoom(){return this.get(gt.MIN_ZOOM)}getMaxZoom(){return this.get(gt.MAX_ZOOM)}getOpacity(){return this.get(gt.OPACITY)}getSourceState(){return Z()}getVisible(){return this.get(gt.VISIBLE)}getZIndex(){return this.get(gt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(gt.EXTENT,t)}setMaxResolution(t){this.set(gt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(gt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(gt.MAX_ZOOM,t)}setMinZoom(t){this.set(gt.MIN_ZOOM,t)}setOpacity(t){Ct(typeof t=="number","Layer opacity must be a number"),this.set(gt.OPACITY,t)}setVisible(t){this.set(gt.VISIBLE,t)}setZIndex(t){this.set(gt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const xu=Dp,Te={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Bt={ANIMATING:0,INTERACTING:1},le={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},kp=256;function nc(n,t,e){return function(i,s,r,o,a){if(!i)return;if(!s&&!t)return i;const l=t?0:r[0]*s,h=t?0:r[1]*s,c=a?a[0]:0,u=a?a[1]:0;let f=n[0]+l/2+c,d=n[2]-l/2+c,g=n[1]+h/2+u,m=n[3]-h/2+u;f>d&&(f=(d+f)/2,d=f),g>m&&(g=(m+g)/2,m=g);let E=Ft(i[0],f,d),y=Ft(i[1],g,m);if(o&&e&&s){const C=30*s;E+=-C*Math.log(1+Math.max(0,f-i[0])/C)+C*Math.log(1+Math.max(0,i[0]-d)/C),y+=-C*Math.log(1+Math.max(0,g-i[1])/C)+C*Math.log(1+Math.max(0,i[1]-m)/C)}return[E,y]}}function Np(n){return n}function va(n,t,e,i){const s=ie(t)/e[0],r=Zi(t)/e[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function Ra(n,t,e){let i=Math.min(n,t);const s=50;return i*=Math.log(1+s*Math.max(0,n/t-1))/s+1,e&&(i=Math.max(i,e),i/=Math.log(1+s*Math.max(0,e/n-1))/s+1),Ft(i,e/2,t*2)}function Gp(n,t,e,i){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=n[0],h=n[n.length-1],c=e?va(l,e,o,i):l;if(a)return t?Ra(s,c,h):Ft(s,h,c);const u=Math.min(c,s),f=Math.floor(Nh(n,u,r));return n[f]>c&&f<n.length-1?n[f+1]:n[f]}}}function Wp(n,t,e,i,s,r){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,h){if(o!==void 0){const c=s?va(t,s,l,r):t;if(h)return i?Ra(o,c,e):Ft(o,e,c);const u=1e-9,f=Math.ceil(Math.log(t/c)/Math.log(n)-u),d=-a*(.5-u)+.5,g=Math.min(c,o),m=Math.floor(Math.log(t/g)/Math.log(n)+d),E=Math.max(f,m),y=t/Math.pow(n,E);return Ft(y,e,c)}}}function ic(n,t,e,i,s){return e=e!==void 0?e:!0,function(r,o,a,l){if(r!==void 0){const h=i?va(n,i,a,s):n;return!e||!l?Ft(r,t,h):Ra(r,h,t)}}}function wa(n){if(n!==void 0)return 0}function sc(n){if(n!==void 0)return n}function Bp(n){const t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function zp(n){return n=n||Rm(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=n?0:t}}function Xp(n){return Math.pow(n,3)}function Ci(n){return 1-Xp(1-n)}function Yp(n){return 3*n*n-2*n*n*n}function jp(n){return n}const Xr=0;class Kp extends Le{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=fa(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Am(),t.center&&(t.center=Ge(t.center,this.projection_)),t.extent&&(t.extent=Pi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in le)delete e[a];this.setProperties(e,!0);const i=Hp(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=Vp(t),r=i.constraint,o=Up(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),a=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=Ge(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Ge(s.anchor,this.getProjection())),e[i]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===e){i&&Ts(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;s<e;++s){const c=arguments[s],u={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Yp,callback:i};if(c.center&&(u.sourceCenter=o,u.targetCenter=c.center.slice(),o=u.targetCenter),c.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(c.zoom),a=u.targetResolution):c.resolution&&(u.sourceResolution=a,u.targetResolution=c.resolution,a=u.targetResolution),c.rotation!==void 0){u.sourceRotation=l;const f=Yl(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+f,l=u.targetRotation}$p(u)?u.complete=!0:r+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(Bt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Bt.ANIMATING]>0}getInteracting(){return this.hints_[Bt.INTERACTING]>0}cancelAnimations(){this.setHint(Bt.ANIMATING,-this.hints_[Bt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const s=this.animations_[e];if(s[0].callback&&Ts(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const h=t-l.start;let c=l.duration>0?h/l.duration:1;c>=1?(l.complete=!0,c=1):r=!1;const u=l.easing(c);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const E=f+u*(g-f),y=d+u*(m-d);this.targetCenter_=[E,y]}if(l.sourceResolution&&l.targetResolution){const f=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=u===1?Yl(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Bt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Ts(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-e[0],s[1]-e[1]],ha(i,t-this.getRotation()),Sm(i,e)),i}calculateCenterZoom(t,e){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=e[0]-t*(e[0]-s[0])/r,a=e[1]-t*(e[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],s=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&xo(t,this.getProjection())}getCenterInternal(){return this.get(le.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return iu(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Ct(e,"The view center is not defined");const i=this.getResolution();Ct(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return Ct(s!==void 0,"The view rotation is not defined"),po(e,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(le.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Pi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=ie(t)/e[0],s=Zi(t)/e[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(e/i)/Math.log(t);return function(r){return e/Math.pow(t,r*s)}}getRotation(){return this.get(le.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/e;return function(o){return Math.log(i/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Yr(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,s;if(this.resolutions_){const r=Nh(this.resolutions_,t,1);e=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Ft(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Ft(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(Ct(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Ct(!ca(t),"Cannot fit empty extent provided as `geometry`");const s=Pi(t,this.getProjection());i=Jl(s)}else if(t.getType()==="Circle"){const s=Pi(t.getExtent(),this.getProjection());i=Jl(s),i.rotate(this.getRotation(),di(s))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,h=-1/0,c=-1/0;for(let u=0,f=r.length;u<f;u+=o){const d=r[u]*i-r[u+1]*s,g=r[u]*s+r[u+1]*i;a=Math.min(a,d),l=Math.min(l,g),h=Math.max(h,d),c=Math.max(c,g)}return[a,l,h,c]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),f=di(a);f[0]+=(s[1]-s[3])/2*l,f[1]+=(s[0]-s[2])/2*l;const d=f[0]*u-f[1]*c,g=f[1]*u+f[0]*c,m=this.getConstrainedCenter([d,g],l),E=e.callback?e.callback:hi;e.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:e.duration,easing:e.easing},E):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Ts(E,!0))}centerOn(t,e,i){this.centerOnInternal(Ge(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Yr(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Yr(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=xo(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Ge(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Ge(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ge(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(le.ROTATION)!==s&&this.set(le.ROTATION,s),this.get(le.RESOLUTION)!==o&&(this.set(le.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(le.CENTER)||!$s(this.get(le.CENTER),a))&&this.set(le.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!$s(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:Ci,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Bt.INTERACTING,1)}endInteraction(t,e,i){i=i&&Ge(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Bt.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function Ts(n,t){setTimeout(function(){n(t)},0)}function Vp(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return nc(n.extent,n.constrainOnlyCenter,e)}const t=fa(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,nc(e,!1,!1)}return Np}function Hp(n){let t,e,i,o=n.minZoom!==void 0?n.minZoom:Xr,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,u=n.showFullExtent!==void 0?n.showFullExtent:!1,f=fa(n.projection,"EPSG:3857"),d=f.getExtent();let g=n.constrainOnlyCenter,m=n.extent;if(!h&&!m&&f.isGlobal()&&(g=!1,m=d),n.resolutions!==void 0){const E=n.resolutions;e=E[o],i=E[a]!==void 0?E[a]:E[E.length-1],n.constrainResolution?t=Gp(E,c,!g&&m,u):t=ic(e,i,c,!g&&m,u)}else{const y=(d?Math.max(ie(d),Zi(d)):360*qh.degrees/f.getMetersPerUnit())/kp/Math.pow(2,Xr),C=y/Math.pow(2,28-Xr);e=n.maxResolution,e!==void 0?o=0:e=y/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(l,a):i=y/Math.pow(l,a):i=C),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),n.constrainResolution?t=Wp(l,e,i,c,!g&&m,u):t=ic(e,i,c,!g&&m,u)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function Up(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?zp():e===!1?sc:typeof e=="number"?Bp(e):sc}return wa}function $p(n){return!(n.sourceCenter&&n.targetCenter&&!$s(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Yr(n,t,e,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=n[0]*r-n[1]*o,l=n[1]*r+n[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;const h=a*r-l*o,c=l*r+a*o;return[h,c]}const Re=Kp;class Zp extends xu{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(gt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(gt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(wt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ht(t,st.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Re?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;e.layerStatesArray?s=e.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return Sa(s,e.viewState)&&(!r||oe(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];const s=t instanceof Re?t.getViewStateAndExtent():t;let r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(gt.MAP,t)}getMapInternal(){return this.get(gt.MAP)}setMap(t){this.mapPrecomposeKey_&&(wt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(wt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ht(t,Te.PRECOMPOSE,function(e){const s=e.frameState.layerStatesArray,r=this.getLayerState(!1);Ct(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=ht(this,st.CHANGE,t.render,t),this.changed())}setSource(t){this.set(gt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Sa(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}const Ia=Zp;class qp extends ia{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Z()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;xi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Xh(s,i)}forEachFeatureAtCoordinate(t,e,i,s,r,o,a,l){let h;const c=e.viewState;function u(v,A,L,k){return r.call(o,A,v?L:null,k)}const f=c.projection,d=Qh(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&s){const v=f.getExtent(),A=ie(v);g.push([-A,0],[A,0])}const m=e.layerStatesArray,E=m.length,y=[],C=[];for(let v=0;v<g.length;v++)for(let A=E-1;A>=0;--A){const L=m[A],k=L.layer;if(k.hasRenderer()&&Sa(L,c)&&a.call(l,k)){const N=k.getRenderer(),q=k.getSource();if(N&&q){const J=q.getWrapX()?d:t,lt=u.bind(null,L.managed);C[0]=J[0]+g[v][0],C[1]=J[1]+g[v][1],h=N.forEachFeatureAtCoordinate(C,e,i,lt,y)}if(h)return h}}if(y.length===0)return;const S=1/y.length;return y.forEach((v,A)=>v.distanceSq+=A*S),y.sort((v,A)=>v.distanceSq-A.distanceSq),y.some(v=>h=v.callback(v.feature,v.layer,v.geometry)),h}hasFeatureAtCoordinate(t,e,i,s,r,o){return this.forEachFeatureAtCoordinate(t,e,i,s,$i,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){Z()}flushDeclutterItems(t){}scheduleExpireIconCache(t){sr.canExpireCache()&&t.postRenderFunctions.push(Jp)}}function Jp(n,t){sr.expire()}const Qp=qp;class ty extends gn{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}}const Cu=ty,As="ol-hidden",br="ol-unselectable",ba="ol-control",rc="ol-collapsed",ey=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),oc=["style","variant","weight","size","lineHeight","family"],vu=function(n){const t=n.match(ey);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=oc.length;i<s;++i){const r=t[i+1];r!==void 0&&(e[oc[i]]=r)}return e.families=e.family.split(/,\s?/),e};function Ee(n,t,e,i){let s;return e&&e.length?s=e.shift():oa?s=new OffscreenCanvas(n||300,t||300):s=document.createElement("canvas"),n&&(s.width=n),t&&(s.height=t),s.getContext("2d",i)}function ny(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function ac(n,t){const e=t.parentNode;e&&e.replaceChild(n,t)}function bo(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function iy(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function sy(n,t){const e=n.childNodes;for(let i=0;;++i){const s=e[i],r=t[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}}const Ru="10px sans-serif",Ut="#000",gi="round",je=[],Ke=0,_i="round",Qi=10,ts="#000",es="center",rr="middle",In=[0,0,0,0],ns=1,We=new Le;let Yn=null,To;const Ao={},ry=function(){const t="32px ",e=["monospace","serif"],i=e.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(h,c,u){let f=!0;for(let d=0;d<i;++d){const g=e[d];if(o=or(h+" "+c+" "+t+g,s),u!=g){const m=or(h+" "+c+" "+t+u+","+g,s);f=f&&m!=o}}return!!f}function l(){let h=!0;const c=We.getKeys();for(let u=0,f=c.length;u<f;++u){const d=c[u];We.get(d)<100&&(a.apply(this,d.split(`
`))?(as(Ao),Yn=null,To=void 0,We.set(d,100)):(We.set(d,We.get(d)+1,!0),h=!1))}h&&(clearInterval(r),r=void 0)}return function(h){const c=vu(h);if(!c)return;const u=c.families;for(let f=0,d=u.length;f<d;++f){const g=u[f],m=c.style+`
`+c.weight+`
`+g;We.get(m)===void 0&&(We.set(m,100,!0),a(c.style,c.weight,g)||(We.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),oy=function(){let n;return function(t){let e=Ao[t];if(e==null){if(oa){const i=vu(t),s=wu(t,"Žg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);Ao[t]=e}return e}}();function wu(n,t){return Yn||(Yn=Ee(1,1)),n!=To&&(Yn.font=n,To=Yn.font),Yn.measureText(t)}function or(n,t){return wu(n,t).width}function lc(n,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((s,r)=>Math.max(s,or(n,r)),0);return e[t]=i,i}function ay(n,t){const e=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){const u=t[h];if(u===`
`||h===c){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const f=t[h+1]||n.font,d=or(f,u);e.push(d),o+=d;const g=oy(f);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:e,heights:i,lineWidths:s}}function ly(n,t,e,i,s,r,o,a,l,h,c){n.save(),e!==1&&(n.globalAlpha*=e),t&&n.transform.apply(n,t),i.contextInstructions?(n.translate(l,h),n.scale(c[0],c[1]),cy(i,n)):c[0]<0||c[1]<0?(n.translate(l,h),n.scale(c[0],c[1]),n.drawImage(i,s,r,o,a,0,0,o,a)):n.drawImage(i,s,r,o,a,l,h,o*c[0],a*c[1]),n.restore()}function cy(n,t){const e=n.contextInstructions;for(let i=0,s=e.length;i<s;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class hy extends Qp{constructor(t){super(t),this.fontChangeListenerKey_=ht(We,li.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=br+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const s=new Cu(t,void 0,e);i.dispatchEvent(s)}}disposeInternal(){wt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Te.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const h=l.layer,c=h.getSourceState();if(!Sa(l,i)||c!="ready"&&c!="undefined"){h.unrender();continue}const u=h.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),"getDeclutter"in h&&s.push(h))}this.flushDeclutterItems(t),sy(this.element_,this.children_),this.dispatchRenderEvent(Te.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let i=e.length-1;i>=0;--i)e[i].renderDeclutter(t);e.length=0}}const uy=hy;class sn extends gn{constructor(t,e){super(t),this.layer=e}}const jr={LAYERS:"layers"};class Ta extends xu{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(jr.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Se(i.slice(),{unique:!0}):Ct(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Se(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(wt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ht(t,Ht.ADD,this.handleLayersAdd_,this),ht(t,Ht.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(wt);as(this.listenerKeys_);const e=t.getArray();for(let i=0,s=e.length;i<s;i++){const r=e[i];this.registerLayerListeners_(r),this.dispatchEvent(new sn("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[ht(t,li.PROPERTYCHANGE,this.handleLayerChange_,this),ht(t,st.CHANGE,this.handleLayerChange_,this)];t instanceof Ta&&e.push(ht(t,"addlayer",this.handleLayerGroupAdd_,this),ht(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[It(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new sn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new sn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new sn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=It(e);this.listenerKeys_[i].forEach(wt),delete this.listenerKeys_[i],this.dispatchEvent(new sn("removelayer",e)),this.changed()}getLayers(){return this.get(jr.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new sn("removelayer",i[s]))}this.set(jr.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=i,a=e.length;o<a;o++){const l=e[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=lm(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return e}getSourceState(){return"ready"}}const Tr=Ta;class fy extends gn{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}const jn=fy;class dy extends jn{constructor(t,e,i,s,r,o){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Qe=dy,Rt={SINGLECLICK:"singleclick",CLICK:st.CLICK,DBLCLICK:st.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Lo={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class gy extends sa{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ht(i,Lo.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ht(i,Lo.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(st.TOUCHMOVE,this.boundHandleTouchMove_,zh?{passive:!1}:!1)}emulateClick_(t){let e=new Qe(Rt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Qe(Rt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Qe(Rt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Rt.POINTERUP||e.type==Rt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==Rt.POINTERDOWN||e.type==Rt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Qe(Rt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(wt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Qe(Rt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ht(i,Rt.POINTERMOVE,this.handlePointerMove_,this),ht(i,Rt.POINTERUP,this.handlePointerUp_,this),ht(this.element_,Rt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ht(this.element_.getRootNode(),Rt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Qe(Rt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Qe(Rt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(wt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(st.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(wt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(wt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const _y=gy,tn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Nt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ar=1/0;class my{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,as(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){Ct(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=ar?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,s=e.length,r=e[t],o=i[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<s&&i[h]<i[l]?h:l;e[t]=e[c],i[t]=i[c],t=c}e[t]=r,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const i=this.elements_,s=this.priorities_,r=i[e],o=s[e];for(;e>t;){const a=this.getParentIndex_(e);if(s[a]>o)i[e]=i[a],s[e]=s[a],e=a;else break}i[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let s=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==ar?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,e[s++]=o);e.length=s,i.length=s,this.heapify_()}}const py=my,Ti={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class yy extends py{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(st.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Ti.LOADED||i===Ti.ERROR||i===Ti.EMPTY){i!==Ti.ERROR&&e.removeEventListener(st.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,s,r,o;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===Ti.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}const Ey=yy;function xy(n,t,e,i,s){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return ar;const r=n.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Cy extends Le{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){bo(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&bo(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)wt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==hi&&this.listenerKeys.push(ht(t,tn.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Aa=Cy;class vy extends Aa{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(st.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+br+" "+ba+(this.collapsed_&&this.collapsible_?" "+rc:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!_n(e,this.renderedAttributions_)){iy(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(rc),this.collapsed_?ac(this.collapseLabel_,this.label_):ac(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Ry=vy;class wy extends Aa{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(st.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+br+" "+ba,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(As)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Ci}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(As);!r&&i===0?this.element.classList.add(As):r&&i!==0&&this.element.classList.remove(As)}this.label_.style.transform=s}this.rotation_=i}}const Sy=wy;class Iy extends Aa{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(st.CLICK,this.handleClick_.bind(this,i),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=h,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(st.CLICK,this.handleClick_.bind(this,-i),!1);const f=e+" "+br+" "+ba,d=this.element;d.className=f,d.appendChild(c),d.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Ci})):i.setZoom(r)}}}const by=Iy;function Ty(n){n=n||{};const t=new Se;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new by(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new Sy(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new Ry(n.attributionOptions)),t}const cc={ACTIVE:"active"};class Ay extends Le{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(cc.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(cc.ACTIVE,t)}setMap(t){this.map_=t}}function Ly(n,t,e){const i=n.getCenterInternal();if(i){const s=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:jp,center:n.getConstrainedCenter(s)})}}function La(n,t,e,i){const s=n.getZoom();if(s===void 0)return;const r=n.getConstrainedZoom(s+t),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:Ci})}const hs=Ay;class My extends hs{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Rt.DBLCLICK){const i=t.originalEvent,s=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();La(a,o,r,this.duration_),i.preventDefault(),e=!0}return!e}}const Oy=My;class Py extends hs{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Rt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Rt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Rt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Rt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Ma(n){const t=n.length;let e=0,i=0;for(let s=0;s<t;s++)e+=n[s].clientX,i+=n[s].clientY;return{clientX:e/t,clientY:i/t}}const us=Py;function Mo(n){const t=arguments;return function(e){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](e),!!i);++s);return i}}const Fy=function(n){const t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Dy=function(n){const t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)},Su=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?Dy(n):!0},ky=$i,Iu=function(n){const t=n.originalEvent;return t.button==0&&!(U_&&Wh&&t.ctrlKey)},bu=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Ny=function(n){const t=n.originalEvent;return Wh?t.metaKey:t.ctrlKey},Gy=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Tu=function(n){const t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Kr=function(n){const t=n.originalEvent;return Ct(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},Wy=function(n){const t=n.originalEvent;return Ct(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class By extends us{constructor(t){super({stopDown:Rr}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Mo(bu,Wy);this.condition_=t.onFocusOnly?Mo(Su,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,s=e.getEventPixel(Ma(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();Im(r,a.getResolution()),ha(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Ci})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const zy=By;class Xy extends us{constructor(t){t=t||{},super({stopDown:Rr}),this.condition_=t.condition?t.condition:Fy,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Kr(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===wa)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Kr(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Kr(t)&&Iu(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Yy=Xy;class jy extends ia{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+i,s.top=Math.min(t[1],e[1])+i,s.width=Math.abs(e[0]-t[0])+i,s.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new er([s])}getGeometry(){return this.geometry_}}const Ky=jy,Ls={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Vr extends gn{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Vy extends us{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Ky(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Iu,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const s=i[0]-e[0],r=i[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Vr(Ls.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Vr(e?Ls.BOXEND:Ls.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Vr(Ls.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Hy=Vy;class Uy extends Hy{constructor(t){t=t||{};const e=t.condition?t.condition:Gy;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Ci})}}const $y=Uy,Cn={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Zy extends hs{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return bu(e)&&Tu(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==st.KEYDOWN){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==Cn.DOWN||s==Cn.LEFT||s==Cn.RIGHT||s==Cn.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,h=0;s==Cn.DOWN?h=-a:s==Cn.LEFT?l=-a:s==Cn.RIGHT?l=a:h=a;const c=[l,h];ha(c,o.getRotation()),Ly(o,c,this.duration_),i.preventDefault(),e=!0}}return!e}}const qy=Zy;class Jy extends hs{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Ny(e)&&Tu(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==st.KEYDOWN||t.type==st.KEYPRESS){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();La(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const Qy=Jy;class t0{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[e+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const e0=t0;class n0 extends hs{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:ky;this.condition_=t.onFocusOnly?Mo(Su,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==st.WHEEL)return!0;const i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==st.WHEEL&&(r=s.deltaY,V_&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Bh),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Ft(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),La(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const i0=n0;class s0 extends us{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Rr),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==wa&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Ma(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const r0=s0;class o0 extends us{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Rr),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,h=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Ma(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const a0=o0;function l0(n){n=n||{};const t=new Se,e=new e0(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new Yy),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new Oy({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new zy({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new r0),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new a0({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new qy),t.push(new Qy({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new i0({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new $y({duration:n.zoomDuration})),t}function hc(n){return n[0]>0&&n[1]>0}function is(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}function Au(n){if(n instanceof Ia){n.setMapInternal(null);return}n instanceof Tr&&n.getLayers().forEach(Au)}function Lu(n,t){if(n instanceof Ia){n.setMapInternal(t);return}if(n instanceof Tr){const e=n.getLayers().getArray();for(let i=0,s=e.length;i<s;++i)Lu(e[i],t)}}let c0=class extends Le{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=h0(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Bh,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=be(),this.pixelToCoordinateTransform_=be(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Ty(),this.interactions=e.interactions||l0({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ey(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Nt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Nt.VIEW,this.handleViewChanged_),this.addChangeListener(Nt.SIZE,this.handleSizeChanged_),this.addChangeListener(Nt.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Re)&&t.view.then(function(s){i.setView(new Re(s))}),this.controls.addEventListener(Ht.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Ht.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Ht.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Ht.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Ht.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Ht.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Lu(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:$i,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(s){s instanceof Tr?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:$i,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(Nt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return xo(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Wt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Nt.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Se){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Ge(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Wt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Nt.SIZE)}getView(){return this.get(Nt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,s){return xy(this.frameState_,t,e,i,s)}handleBrowserEvent(t,e){e=e||t.type;const i=new Qe(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Lo.POINTERDOWN||i===st.WHEEL||i===st.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[Bt.ANIMATING]||o[Bt.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Te.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Te.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new jn(tn.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new jn(tn.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)wt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(st.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(st.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,bo(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new uy(this)),this.mapBrowserEventHandler_=new _y(this,this.moveTolerance_);for(const r in Rt)this.mapBrowserEventHandler_.addEventListener(Rt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(st.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(st.WHEEL,this.boundHandleBrowserEvent_,zh?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[ht(i,st.KEYDOWN,this.handleBrowserEvent,this),ht(i,st.KEYPRESS,this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(wt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(wt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ht(t,li.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ht(t,st.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(wt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new sn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ht(t,li.PROPERTYCHANGE,this.render,this),ht(t,st.CHANGE,this.render,this),ht(t,"addlayer",this.handleLayerAdd_,this),ht(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Au(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(e!==void 0&&hc(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:po(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:It(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=po(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!ca(this.previousExtent_)&&!Hs(r.extent,this.previousExtent_))&&(this.dispatchEvent(new jn(tn.MOVESTART,this,s)),this.previousExtent_=ls(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Bt.ANIMATING]&&!r.viewHints[Bt.INTERACTING]&&!Hs(r.extent,this.previousExtent_)&&(this.dispatchEvent(new jn(tn.MOVEEND,this,r)),Yh(r.extent,this.previousExtent_))),this.dispatchEvent(new jn(tn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(tn.LOADSTART)||this.hasListener(tn.LOADEND)||this.hasListener(Te.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new sn("removelayer",e)),this.set(Nt.LAYERGROUP,t)}setSize(t){this.set(Nt.SIZE,t)}setTarget(t){this.set(Nt.TARGET,t)}setView(t){if(!t||t instanceof Re){this.set(Nt.VIEW,t);return}this.set(Nt.VIEW,new Re);const e=this;t.then(function(i){e.setView(new Re(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!hc(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&eu("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!_n(e,i))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};function h0(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Tr({layers:n.layers});e[Nt.LAYERGROUP]=i,e[Nt.TARGET]=n.target,e[Nt.VIEW]=n.view instanceof Re?n.view:new Re;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new Se(n.controls.slice()):(Ct(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls));let r;n.interactions!==void 0&&(Array.isArray(n.interactions)?r=new Se(n.interactions.slice()):(Ct(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Se(n.overlays.slice()):(Ct(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Se,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}const u0=c0;function f0(n,t,e,i,s){Mu(n,t,e||0,i||n.length-1,s||d0)}function Mu(n,t,e,i,s){for(;i>e;){if(i-e>600){var r=i-e+1,o=t-e+1,a=Math.log(r),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),c=Math.max(e,Math.floor(t-o*l/r+h)),u=Math.min(i,Math.floor(t+(r-o)*l/r+h));Mu(n,t,c,u,s)}var f=n[t],d=e,g=i;for(Ai(n,e,t),s(n[i],f)>0&&Ai(n,e,i);d<g;){for(Ai(n,d,g),d++,g--;s(n[d],f)<0;)d++;for(;s(n[g],f)>0;)g--}s(n[e],f)===0?Ai(n,e,g):(g++,Ai(n,g,i)),g<=t&&(e=g+1),t<=g&&(i=g-1)}}function Ai(n,t,e){var i=n[t];n[t]=n[e],n[e]=i}function d0(n,t){return n<t?-1:n>t?1:0}let Ou=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!Os(t,e))return i;const s=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],l=e.leaf?s(a):a;Os(t,l)&&(e.leaf?i.push(a):Ur(t,l)?this._all(a,i):r.push(a))}e=r.pop()}return i}collides(t){let e=this.data;if(!Os(t,e))return!1;const i=[];for(;e;){for(let s=0;s<e.children.length;s++){const r=e.children[s],o=e.leaf?this.toBBox(r):r;if(Os(t,o)){if(e.leaf||Ur(t,o))return!0;i.push(r)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Kn([]),this}remove(t,e){if(!t)return this;let i=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,h;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),h=!0),i.leaf){const c=g0(t,i.children,e);if(c!==-1)return i.children.splice(c,1),r.push(i),this._condense(r),this}!h&&!i.leaf&&Ur(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],h=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,s){const r=i-e+1;let o=this._maxEntries,a;if(r<=o)return a=Kn(t.slice(e,i+1)),Bn(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Kn([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),h=l*Math.ceil(Math.sqrt(o));uc(t,e,i,h,this.compareMinX);for(let c=e;c<=i;c+=h){const u=Math.min(c+h-1,i);uc(t,c,u,l,this.compareMinY);for(let f=c;f<=u;f+=l){const d=Math.min(f+l-1,u);a.children.push(this._build(t,f,d,s-1))}}return Bn(a,this.toBBox),a}_chooseSubtree(t,e,i,s){for(;s.push(e),!(e.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<e.children.length;l++){const h=e.children[l],c=Hr(h),u=p0(t,h)-c;u<o?(o=u,r=c<r?c:r,a=h):u===o&&c<r&&(r=c,a=h)}e=a||e.children[0]}return e}_insert(t,e,i){const s=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,e,r);for(o.children.push(t),Di(o,s);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(s,r,e)}_split(t,e){const i=t[e],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=Kn(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Bn(i,this.toBBox),Bn(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this.data=Kn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Bn(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let s,r=1/0,o=1/0;for(let a=e;a<=i-e;a++){const l=Fi(t,0,a,this.toBBox),h=Fi(t,a,i,this.toBBox),c=y0(l,h),u=Hr(l)+Hr(h);c<r?(r=c,s=a,o=u<o?u:o):c===r&&u<o&&(o=u,s=a)}return s||i-e}_chooseSplitAxis(t,e,i){const s=t.leaf?this.compareMinX:_0,r=t.leaf?this.compareMinY:m0,o=this._allDistMargin(t,e,i,s),a=this._allDistMargin(t,e,i,r);o<a&&t.children.sort(s)}_allDistMargin(t,e,i,s){t.children.sort(s);const r=this.toBBox,o=Fi(t,0,e,r),a=Fi(t,i-e,i,r);let l=Ms(o)+Ms(a);for(let h=e;h<i-e;h++){const c=t.children[h];Di(o,t.leaf?r(c):c),l+=Ms(o)}for(let h=i-e-1;h>=e;h--){const c=t.children[h];Di(a,t.leaf?r(c):c),l+=Ms(a)}return l}_adjustParentBBoxes(t,e,i){for(let s=i;s>=0;s--)Di(e[s],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():Bn(t[e],this.toBBox)}};function g0(n,t,e){if(!e)return t.indexOf(n);for(let i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function Bn(n,t){Fi(n,0,n.children.length,t,n)}function Fi(n,t,e,i,s){s||(s=Kn(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<e;r++){const o=n.children[r];Di(s,n.leaf?i(o):o)}return s}function Di(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function _0(n,t){return n.minX-t.minX}function m0(n,t){return n.minY-t.minY}function Hr(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Ms(n){return n.maxX-n.minX+(n.maxY-n.minY)}function p0(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function y0(n,t){const e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),s=Math.min(n.maxX,t.maxX),r=Math.min(n.maxY,t.maxY);return Math.max(0,s-e)*Math.max(0,r-i)}function Ur(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function Os(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Kn(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function uc(n,t,e,i,s){const r=[t,e];for(;r.length;){if(e=r.pop(),t=r.pop(),e-t<=i)continue;const o=t+Math.ceil((e-t)/i/2)*i;f0(n,o,t,e,s),r.push(t,o,o,e)}}const Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Oa{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=is(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Oa({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Z()}getImage(t){return Z()}getHitDetectionImage(){return Z()}getPixelRatio(t){return 1}getImageState(){return Z()}getImageSize(){return Z()}getOrigin(){return Z()}getSize(){return Z()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=is(t)}listenImageChange(t){Z()}load(){Z()}unlistenImageChange(t){Z()}}const Pu=Oa;function Ie(n){return Array.isArray(n)?Eu(n):n}class Pa extends Pu{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Pa({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,s=Ee(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Et.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const L=s;s=r,r=L}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),h=Math.sqrt(r*r-l*l),c=s-h,u=Math.sqrt(l*l+c*c),f=u/l;if(t==="miter"&&f<=i)return f*e;const d=e/2/f,g=e/2*(c/u),E=Math.sqrt((s+d)*(s+d)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return E*2;const y=s*Math.sin(a),C=Math.sqrt(s*s-y*y),S=r-C,A=Math.sqrt(y*y+S*S)/y;if(A<=i){const L=A*e/2-r-s;return 2*Math.max(E,L)}return E*2}createRenderOptions(){let t=gi,e=_i,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=ts),o=Ie(o),a=this.stroke_.getWidth(),a===void 0&&(a=ns),s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=_i),t=this.stroke_.getLineCap(),t===void 0&&(t=gi),i=this.stroke_.getMiterLimit(),i===void 0&&(i=Qi));const l=this.calculateLineJoinSize_(e,a,i),h=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*h+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ut),e.fillStyle=Ie(s),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=ir(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const s=Ee(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=r+a*o,h=a%2===0?i:s;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ut,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const Fu=Pa;class Fa extends Fu{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Fa({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const Du=Fa;class Da{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Da({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const ka=Da;class Na{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Na({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const ku=Na;class Ar{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=fc,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ar({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=fc,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function E0(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(Ct(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let $r=null;function x0(n,t){if(!$r){const e=new ka({color:"rgba(255,255,255,0.4)"}),i=new ku({color:"#3399CC",width:1.25});$r=[new Ar({image:new Du({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return $r}function fc(n){return n.getGeometry()}const Bs=Ar;function C0(n,t){return new Promise((e,i)=>{function s(){o(),e(n)}function r(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",s),n.removeEventListener("error",r)}n.addEventListener("load",s),n.addEventListener("error",r),t&&(n.src=t)})}function v0(n,t){return t&&(n.src=t),$_?new Promise((e,i)=>n.decode().then(()=>e(n),i)):C0(n)}let Li=null;class R0 extends sa{constructor(t,e,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?Et.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Et.LOADED){Li||(Li=Ee(1,1,void 0,{willReadFrequently:!0})),Li.drawImage(this.image_,0,0);try{Li.getImageData(0,0,1,1),this.tainted_=!1}catch{Li=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(st.CHANGE)}handleImageError_(){this.imageState_=Et.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Et.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Ee(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Et.IDLE){this.image_||this.initializeImage_(),this.imageState_=Et.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&v0(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Et.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=yu(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}}function w0(n,t,e,i,s){let r=t===void 0?void 0:sr.get(t,e,s);return r||(r=new R0(n,n instanceof HTMLImageElement?n.src||void 0:t,e,i,s),sr.set(t,e,s,r)),r}function dc(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}class Ga extends Pu{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Ct(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||It(o)),Ct(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ct(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Et.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Et.LOADED:Et.IDLE:l=Et.LOADING:l=Et.LOADED),this.color_=t.color!==void 0?ir(t.color):null,this.iconImage_=w0(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,c;if(t.size)[h,c]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)h=u.width,c=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(dc(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}h!==void 0&&this.setScale(dc(h,c,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Ga({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(st.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(st.CHANGE,t)}}const Nu=Ga,S0="#333";class Wa{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=is(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new ka({color:S0}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new Wa({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=is(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const I0=Wa;let vi=0;const Gt=1<<vi++,it=1<<vi++,mi=1<<vi++,Ba=1<<vi++,fs=1<<vi++,ce=Math.pow(2,vi)-1,Gu={[Gt]:"boolean",[it]:"number",[mi]:"string",[Ba]:"color",[fs]:"number[]"},b0=Object.keys(Gu).map(Number).sort(ci);function lr(n){const t=[];for(const e of b0)T0(n,e)&&t.push(Gu[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function T0(n,t){return(n&t)===t}function Wu(n,t){return!!(n&t)}class an{constructor(t,e){this.type=t,this.value=e}}class A0{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function Bu(){return{variables:new Set,properties:new Set}}function Lr(n,t){switch(typeof n){case"boolean":return new an(Gt,n);case"number":return new an(it,n);case"string":return new an(mi,n)}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return F0(n,t);for(const i of n)if(typeof i!="number")throw new Error("Expected an array of numbers");let e=fs;return(n.length===3||n.length===4)&&(e|=Ba),new an(e,n)}const M={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},L0={[M.Number]:dt(yt(1,1/0,ce),it),[M.String]:dt(yt(1,1/0,ce),mi),[M.Get]:dt(M0,ce),[M.Var]:dt(O0,ce),[M.Resolution]:dt(P0,it),[M.Any]:dt(yt(2,1/0,Gt),Gt),[M.All]:dt(yt(2,1/0,Gt),Gt),[M.Not]:dt(yt(1,1,Gt),Gt),[M.Equal]:dt(yt(2,2,ce),Gt),[M.NotEqual]:dt(yt(2,2,ce),Gt),[M.GreaterThan]:dt(yt(2,2,ce),Gt),[M.GreaterThanOrEqualTo]:dt(yt(2,2,ce),Gt),[M.LessThan]:dt(yt(2,2,ce),Gt),[M.LessThanOrEqualTo]:dt(yt(2,2,ce),Gt),[M.Multiply]:dt(yt(2,1/0,it),it),[M.Divide]:dt(yt(2,2,it),it),[M.Add]:dt(yt(2,1/0,it),it),[M.Subtract]:dt(yt(2,2,it),it),[M.Clamp]:dt(yt(3,3,it),it),[M.Mod]:dt(yt(2,2,it),it),[M.Pow]:dt(yt(2,2,it),it),[M.Abs]:dt(yt(1,1,it),it),[M.Floor]:dt(yt(1,1,it),it),[M.Ceil]:dt(yt(1,1,it),it),[M.Round]:dt(yt(1,1,it),it),[M.Sin]:dt(yt(1,1,it),it),[M.Cos]:dt(yt(1,1,it),it),[M.Atan]:dt(yt(1,2,it),it),[M.Sqrt]:dt(yt(1,1,it),it),[M.Match]:dt(yt(4,1/0,mi|it),ce)};function M0(n,t){if(n.length!==2)throw new Error("Expected 1 argument for get operation");const e=Lr(n[1],t);if(!(e instanceof an))throw new Error("Expected a literal argument for get operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(e.value),[e]}function O0(n,t){if(n.length!==2)throw new Error("Expected 1 argument for var operation");const e=Lr(n[1],t);if(!(e instanceof an))throw new Error("Expected a literal argument for var operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(e.value),[e]}function P0(n,t){const e=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${e} operation`);return[]}function yt(n,t,e){return function(i,s){const r=i[0],o=i.length-1;if(n===t){if(o!==n){const l=n===1?"":"s";throw new Error(`Expected ${n} argument${l} for operation ${r}, got ${o}`)}}else if(o<n||o>t)throw new Error(`Expected ${n} to ${t} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const h=Lr(i[l+1],s);if(!Wu(e,h.type)){const c=lr(e),u=lr(h.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${c} but expected ${u}`)}a[l]=h}return a}}function dt(n,t){return function(e,i){const s=e[0],r=n(e,i);return new A0(t,s,...r)}}function F0(n,t){const e=n[0],i=L0[e];if(!i)throw new Error(`Unknown operator: ${e}`);return i(n,t)}function zu(){return{variables:{},properties:{},resolution:NaN}}function mn(n,t,e){const i=Lr(n,e);if(!Wu(t,i.type)){const s=lr(t),r=lr(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return On(i)}function On(n,t){if(n instanceof an)return function(){return n.value};const e=n.operator;switch(e){case M.Number:case M.String:return D0(n);case M.Get:case M.Var:return k0(n);case M.Resolution:return i=>i.resolution;case M.Any:case M.All:case M.Not:return G0(n);case M.Equal:case M.NotEqual:case M.LessThan:case M.LessThanOrEqualTo:case M.GreaterThan:case M.GreaterThanOrEqualTo:return N0(n);case M.Multiply:case M.Divide:case M.Add:case M.Subtract:case M.Clamp:case M.Mod:case M.Pow:case M.Abs:case M.Floor:case M.Ceil:case M.Round:case M.Sin:case M.Cos:case M.Atan:case M.Sqrt:return W0(n);case M.Match:return B0(n);default:throw new Error(`Unsupported operator ${e}`)}}function D0(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=On(n.args[r]);switch(e){case M.Number:case M.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function k0(n,t){const e=n.args[0];if(!(e instanceof an))throw new Error("Expected literal name");const i=e.value;if(typeof i!="string")throw new Error("Expected string name");switch(n.operator){case M.Get:return s=>s.properties[i];case M.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function N0(n,t){const e=n.operator,i=On(n.args[0]),s=On(n.args[1]);switch(e){case M.Equal:return r=>i(r)===s(r);case M.NotEqual:return r=>i(r)!==s(r);case M.LessThan:return r=>i(r)<s(r);case M.LessThanOrEqualTo:return r=>i(r)<=s(r);case M.GreaterThan:return r=>i(r)>s(r);case M.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${e}`)}}function G0(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=On(n.args[r]);switch(e){case M.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case M.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case M.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${e}`)}}function W0(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=On(n.args[r]);switch(e){case M.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case M.Divide:return r=>s[0](r)/s[1](r);case M.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case M.Subtract:return r=>s[0](r)-s[1](r);case M.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case M.Mod:return r=>s[0](r)%s[1](r);case M.Pow:return r=>Math.pow(s[0](r),s[1](r));case M.Abs:return r=>Math.abs(s[0](r));case M.Floor:return r=>Math.floor(s[0](r));case M.Ceil:return r=>Math.ceil(s[0](r));case M.Round:return r=>Math.round(s[0](r));case M.Sin:return r=>Math.sin(s[0](r));case M.Cos:return r=>Math.cos(s[0](r));case M.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case M.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${e}`)}}function B0(n,t){const e=n.args.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=On(n.args[s]);return s=>{const r=i[0](s);for(let o=1;o<e;o+=2)if(r===i[o](s))return i[o+1](s);return i[e-1](s)}}function z0(n){return!0}function X0(n){const t=Bu(),e=Y0(n,t),i=zu();return function(s,r){return i.properties=s.getPropertiesInternal(),i.resolution=r,e(i)}}function gc(n){const t=Bu(),e=n.length,i=new Array(e);for(let o=0;o<e;++o)i[o]=Oo(n[o],t);const s=zu(),r=new Array(e);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<e;++l)r[l]=i[l](s);return r}}function Y0(n,t){const e=n.length,i=new Array(e);for(let s=0;s<e;++s){const r=n[s],o="filter"in r?mn(r.filter,Gt,t):z0;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let h=0;h<l;++h)a[h]=Oo(r.style[h],t)}else a=[Oo(r.style,t)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<e;++a){const l=i[a].filter;if(l(s)&&!(n[a].else&&o)){o=!0;for(const h of i[a].styles){const c=h(s);c&&r.push(c)}}}return r}}function Oo(n,t){const e=ss(n,"",t),i=rs(n,"",t),s=j0(n,t),r=K0(n,t),o=$t(n,"z-index",t),a=new Bs;return function(l){let h=!0;if(e){const c=e(l);c&&(h=!1),a.setFill(c)}if(i){const c=i(l);c&&(h=!1),a.setStroke(c)}if(s){const c=s(l);c&&(h=!1),a.setText(c)}if(r){const c=r(l);c&&(h=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),h?null:a}}function ss(n,t,e){const i=Xu(n,t+"fill-color",e);if(!i)return null;const s=new ka;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function rs(n,t,e){const i=$t(n,t+"stroke-width",e),s=Xu(n,t+"stroke-color",e);if(!i&&!s)return null;const r=rn(n,t+"stroke-line-cap",e),o=rn(n,t+"stroke-line-join",e),a=Yu(n,t+"stroke-line-dash",e),l=$t(n,t+"stroke-line-dash-offset",e),h=$t(n,t+"stroke-miter-limit",e),c=new ku;return function(u){if(s){const f=s(u);if(f==="none")return null;c.setColor(f)}if(i&&c.setWidth(i(u)),r){const f=r(u);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(f)}if(o){const f=o(u);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return a&&c.setLineDash(a(u)),l&&c.setLineDashOffset(l(u)),h&&c.setMiterLimit(h(u)),c}}function j0(n,t){const e="text-",i=rn(n,e+"value",t);if(!i)return null;const s=ss(n,e,t),r=ss(n,e+"background-",t),o=rs(n,e,t),a=rs(n,e+"background-",t),l=rn(n,e+"font",t),h=$t(n,e+"max-angle",t),c=$t(n,e+"offset-x",t),u=$t(n,e+"offset-y",t),f=os(n,e+"overflow",t),d=rn(n,e+"placement",t),g=$t(n,e+"repeat",t),m=Mr(n,e+"scale",t),E=os(n,e+"rotate-with-view",t),y=$t(n,e+"rotation",t),C=rn(n,e+"align",t),S=rn(n,e+"justify",t),v=rn(n,e+"baseline",t),A=Yu(n,e+"padding",t),L=new I0({});return function(k){if(L.setText(i(k)),s&&L.setFill(s(k)),r&&L.setBackgroundFill(r(k)),o&&L.setStroke(o(k)),a&&L.setBackgroundStroke(a(k)),l&&L.setFont(l(k)),h&&L.setMaxAngle(h(k)),c&&L.setOffsetX(c(k)),u&&L.setOffsetY(u(k)),f&&L.setOverflow(f(k)),d){const N=d(k);if(N!=="point"&&N!=="line")throw new Error("Expected point or line for text-placement");L.setPlacement(N)}if(g&&L.setRepeat(g(k)),m&&L.setScale(m(k)),E&&L.setRotateWithView(E(k)),y&&L.setRotation(y(k)),C){const N=C(k);if(N!=="left"&&N!=="center"&&N!=="right"&&N!=="end"&&N!=="start")throw new Error("Expected left, right, center, start, or end for text-align");L.setTextAlign(N)}if(S){const N=S(k);if(N!=="left"&&N!=="right"&&N!=="center")throw new Error("Expected left, right, or center for text-justify");L.setJustify(N)}if(v){const N=v(k);if(N!=="bottom"&&N!=="top"&&N!=="middle"&&N!=="alphabetic"&&N!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");L.setTextBaseline(N)}return A&&L.setPadding(A(k)),L}}function K0(n,t){return"icon-src"in n?V0(n,t):"shape-points"in n?H0(n,t):"circle-radius"in n?U0(n,t):null}function V0(n,t){const e="icon-",i=e+"src",s=ju(n[i],i),r=cr(n,e+"anchor",t),o=Mr(n,e+"scale",t),a=$t(n,e+"opacity",t),l=cr(n,e+"displacement",t),h=$t(n,e+"rotation",t),c=os(n,e+"rotate-with-view",t),u=_c(n,e+"anchor-origin"),f=mc(n,e+"anchor-x-units"),d=mc(n,e+"anchor-y-units"),g=J0(n,e+"color"),m=Z0(n,e+"cross-origin"),E=q0(n,e+"offset"),y=_c(n,e+"offset-origin"),C=Zn(n,e+"width"),S=Zn(n,e+"height"),v=$0(n,e+"size"),A=za(n,e+"declutter"),L=new Nu({src:s,anchorOrigin:u,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:m,offset:E,offsetOrigin:y,height:S,width:C,size:v,declutterMode:A});return function(k){return a&&L.setOpacity(a(k)),l&&L.setDisplacement(l(k)),h&&L.setRotation(h(k)),c&&L.setRotateWithView(c(k)),o&&L.setScale(o(k)),r&&L.setAnchor(r(k)),L}}function H0(n,t){const e="shape-",i=e+"points",s=Ku(n[i],i),r=ss(n,e,t),o=rs(n,e,t),a=Mr(n,e+"scale",t),l=cr(n,e+"displacement",t),h=$t(n,e+"rotation",t),c=os(n,e+"rotate-with-view",t),u=Zn(n,e+"radius"),f=Zn(n,e+"radius1"),d=Zn(n,e+"radius2"),g=Zn(n,e+"angle"),m=za(n,e+"declutter-mode"),E=new Fu({points:s,radius:u,radius1:f,radius2:d,angle:g,declutterMode:m});return function(y){return r&&E.setFill(r(y)),o&&E.setStroke(o(y)),l&&E.setDisplacement(l(y)),h&&E.setRotation(h(y)),c&&E.setRotateWithView(c(y)),a&&E.setScale(a(y)),E}}function U0(n,t){const e="circle-",i=ss(n,e,t),s=rs(n,e,t),r=$t(n,e+"radius",t),o=Mr(n,e+"scale",t),a=cr(n,e+"displacement",t),l=$t(n,e+"rotation",t),h=os(n,e+"rotate-with-view",t),c=za(n,e+"declutter-mode"),u=new Du({radius:5,declutterMode:c});return function(f){return r&&u.setRadius(r(f)),i&&u.setFill(i(f)),s&&u.setStroke(s(f)),a&&u.setDisplacement(a(f)),l&&u.setRotation(l(f)),h&&u.setRotateWithView(h(f)),o&&u.setScale(o(f)),u}}function $t(n,t,e){if(!(t in n))return;const i=mn(n[t],it,e);return function(s){return Ku(i(s),t)}}function rn(n,t,e){if(!(t in n))return null;const i=mn(n[t],mi,e);return function(s){return ju(i(s),t)}}function os(n,t,e){if(!(t in n))return null;const i=mn(n[t],Gt,e);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function Xu(n,t,e){if(!(t in n))return null;const i=mn(n[t],Ba|mi,e);return function(s){return Vu(i(s),t)}}function Yu(n,t,e){if(!(t in n))return null;const i=mn(n[t],fs,e);return function(s){return ds(i(s),t)}}function cr(n,t,e){if(!(t in n))return null;const i=mn(n[t],fs,e);return function(s){const r=ds(i(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function Mr(n,t,e){if(!(t in n))return null;const i=mn(n[t],fs|it,e);return function(s){return Q0(i(s),t)}}function Zn(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function $0(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return is(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function Z0(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function _c(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function mc(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function q0(n,t){const e=n[t];if(e!==void 0)return ds(e,t)}function za(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function J0(n,t){const e=n[t];if(e!==void 0)return Vu(e,t)}function ds(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function ju(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function Ku(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function Vu(n,t){if(typeof n=="string")return n;const e=ds(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Q0(n,t){if(typeof n=="number")return n;const e=ds(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}const pc={RENDER_ORDER:"renderOrder"};class tE extends Ia{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(pc.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Ou(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(pc.RENDER_ORDER,t)}setStyle(t){this.style_=eE(t),this.styleFunction_=t===null?void 0:E0(this.style_),this.changed()}}function eE(n){if(n===void 0)return x0;if(!n)return null;if(typeof n=="function"||n instanceof Bs)return n;if(!Array.isArray(n))return gc([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof Bs){const s=new Array(t);for(let r=0;r<t;++r){const o=n[r];if(!(o instanceof Bs))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in e){const s=new Array(t);for(let r=0;r<t;++r){const o=n[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return X0(s)}return gc(n)}const nE=tE,gs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ps=[gs.FILL],ln=[gs.STROKE],bn=[gs.BEGIN_PATH],yc=[gs.CLOSE_PATH],U=gs;class iE{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Hu=iE;class sE extends Hu{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=t.length;a<l;a+=e)s[0]=t[a],s[1]=t[a+1],em(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,r,o){const a=this.coordinates;let l=a.length;const h=this.getBufferedMaxExtent();o&&(e+=s);let c=t[e],u=t[e+1];const f=this.tmpCoordinate_;let d=!0,g,m,E;for(g=e+s;g<i;g+=s)f[0]=t[g],f[1]=t[g+1],E=mo(h,f),E!==m?(d&&(a[l++]=c,a[l++]=u,d=!1),a[l++]=f[0],a[l++]=f[1]):E===Lt.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],d=!1):d=!0,c=f[0],u=f[1],m=E;return(r&&d||g===e+s)&&(a[l++]=c,a[l++]=u),l}drawCustomCoordinates_(t,e,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],h=this.appendFlatLineCoordinates(t,e,l,s,!1,!1);r.push(h),e=l}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,h,c,u,f;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];const d=t.getEndss();f=0;for(let g=0,m=d.length;g<m;++g){const E=[];f=this.drawCustomCoordinates_(l,f,d[g],o,E),u.push(E)}this.instructions.push([U.CUSTOM,a,u,t,i,Co]),this.hitDetectionInstructions.push([U.CUSTOM,a,u,t,s||i,Co]);break;case"Polygon":case"MultiLineString":c=[],l=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,t.getEnds(),o,c),this.instructions.push([U.CUSTOM,a,c,t,i,qi]),this.hitDetectionInstructions.push([U.CUSTOM,a,c,t,s||i,qi]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([U.CUSTOM,a,h,t,i,on]),this.hitDetectionInstructions.push([U.CUSTOM,a,h,t,s||i,on]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([U.CUSTOM,a,h,t,i,on]),this.hitDetectionInstructions.push([U.CUSTOM,a,h,t,s||i,on]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([U.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([U.CUSTOM,a,h,t,s||i]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[U.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[U.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let s,r,o=-1;for(e=0;e<i;++e)s=t[e],r=s[0],r==U.END_GEOMETRY?o=e:r==U.BEGIN_GEOMETRY&&(s[2]=e,G_(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const s=t.getColor();i.fillStyle=Ie(s||Ut)}else i.fillStyle=void 0;if(e){const s=e.getColor();i.strokeStyle=Ie(s||ts);const r=e.getLineCap();i.lineCap=r!==void 0?r:gi;const o=e.getLineDash();i.lineDash=o?o.slice():je;const a=e.getLineDashOffset();i.lineDashOffset=a||Ke;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:_i;const h=e.getWidth();i.lineWidth=h!==void 0?h:ns;const c=e.getMiterLimit();i.miterLimit=c!==void 0?c:Qi,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[U.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[U.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!_n(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[U.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Yh(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;aa(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const _s=sE;class rE extends _s{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([U.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([U.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const oE=rE;class aE extends _s{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[U.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,je,Ke],bn);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(ln),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,je,Ke],bn);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinates_(a,h,o[c],l);this.hitDetectionInstructions.push(ln),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ln),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ln),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(bn)}}const lE=aE;class cE extends _s{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(bn),this.hitDetectionInstructions.push(bn);for(let h=0;h<l;++h){const c=i[h],u=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,c,s,!0,!a),d=[U.MOVE_TO_LINE_TO,u,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(yc),this.hitDetectionInstructions.push(yc)),e=c}return o&&(this.instructions.push(Ps),this.hitDetectionInstructions.push(Ps)),a&&(this.instructions.push(ln),this.hitDetectionInstructions.push(ln)),e}drawCircle(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,je,Ke]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const h=[U.CIRCLE,l];this.instructions.push(bn,h),this.hitDetectionInstructions.push(bn,h),i.fillStyle!==void 0&&(this.instructions.push(Ps),this.hitDetectionInstructions.push(Ps)),i.strokeStyle!==void 0&&(this.instructions.push(ln),this.hitDetectionInstructions.push(ln)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,je,Ke]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,je,Ke]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinatess_(a,h,o[c],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=vn(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const Ec=cE;function hE(n,t,e,i,s){const r=[];let o=e,a=0,l=t.slice(e,2);for(;a<n&&o+s<i;){const[h,c]=l.slice(-2),u=t[o+s],f=t[o+s+1],d=Math.sqrt((u-h)*(u-h)+(f-c)*(f-c));if(a+=d,a>=n){const g=(n-a+d)/d,m=ne(h,u,g),E=ne(c,f,g);l.push(m,E),r.push(l),l=[m,E],a==n&&(o+=s),a=0}else if(a<n)l.push(t[o+s],t[o+s+1]),o+=s;else{const g=d-a,m=ne(h,u,g/d),E=ne(c,f,g/d);l.push(m,E),r.push(l),l=[m,E],a=0,o+=s}}return a>0&&r.push(l),r}function uE(n,t,e,i,s){let r=e,o=e,a=0,l=0,h=e,c,u,f,d,g,m,E,y,C,S;for(u=e;u<i;u+=s){const v=t[u],A=t[u+1];g!==void 0&&(C=v-g,S=A-m,d=Math.sqrt(C*C+S*S),E!==void 0&&(l+=f,c=Math.acos((E*C+y*S)/(f*d)),c>n&&(l>a&&(a=l,r=h,o=u),l=0,h=u-s)),f=d,E=C,y=S),g=v,m=A}return l+=d,l>a?[h,u]:[r,o]}const hr={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class fE extends _s{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ut]={fillStyle:Ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const l=t.getType();let h=null,c=t.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!oe(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(h=t.getFlatCoordinates(),l=="LineString")u=[h.length];else if(l=="MultiLineString")u=t.getEnds();else if(l=="Polygon")u=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();u=[];for(let E=0,y=m.length;E<y;++E)u.push(m[E][0])}this.beginGeometry(t,e);const f=r.repeat,d=f?void 0:r.textAlign;let g=0;for(let m=0,E=u.length;m<E;++m){let y;f?y=hE(f*this.resolution,h,g,u[m],c):y=[h.slice(g,u[m])];for(let C=0,S=y.length;C<S;++C){const v=y[C];let A=0,L=v.length;if(d==null){const N=uE(r.maxAngle,v,0,v.length,2);A=N[0],L=N[1]}for(let N=A;N<L;N+=c)o.push(v[N],v[N+1]);const k=o.length;g=u[m],this.drawChars_(a,k),a=k}}this.endGeometry(e)}else{let u=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),r.overflow||u.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();h=[];for(let C=0,S=y.length;C<S;C+=3)r.overflow||u.push(y[C+2]/this.resolution),h.push(y[C],y[C+1]);if(h.length===0)return;c=2;break}const f=this.appendFlatPointCoordinates(h,c);if(f===a)return;if(u&&(f-a)/2!==h.length/c){let y=a/2;u=u.filter((C,S)=>{const v=o[(y+S)*2]===h[S*c]&&o[(y+S)*2+1]===h[S*c+1];return v||--y,v})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let d=r.padding;if(d!=In&&(r.scale[0]<0||r.scale[1]<0)){let y=r.padding[0],C=r.padding[1],S=r.padding[2],v=r.padding[3];r.scale[0]<0&&(C=-C,v=-v),r.scale[1]<0&&(y=-y,S=-S),d=[y,C,S,v]}const g=this.pixelRatio;this.instructions.push([U.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==In?In:d.map(function(y){return y*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);const m=1/g,E=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=Ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([U.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),r.backgroundFill&&(this.state.fillStyle=E,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||es,justify:e.justify,textBaseline:e.textBaseline||rr,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=hr[s.textBaseline],c=this.textOffsetY_*l,u=this.text_,f=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([U.DRAW_CHARS,t,e,h,s.overflow,a,s.maxAngle,l,c,r,f*l,u,o,1]),this.hitDetectionInstructions.push([U.DRAW_CHARS,t,e,h,s.overflow,a&&Ut,s.maxAngle,l,c,r,f*l,u,o,1/l])}setTextStyle(t,e){let i,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Ie(o.getColor()||Ut)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),E=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||gi,r.lineDash=g?g.slice():je,r.lineDashOffset=m===void 0?Ke:m,r.lineJoin=a.getLineJoin()||_i,r.lineWidth=E===void 0?ns:E,r.miterLimit=y===void 0?Qi:y,r.strokeStyle=Ie(a.getColor()||ts)}i=this.textState_;const l=t.getFont()||Ru;ry(l);const h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||rr,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||In,i.scale=h===void 0?[1,1]:h;const c=t.getOffsetX(),u=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:It(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+It(s.fillStyle):""}this.declutterImageWithText_=e}}const dE={Circle:Ec,Default:_s,Image:oE,LineString:lE,Polygon:Ec,Text:fE};class gE{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const r=i[s].finish();t[e][s]=r}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[e];if(r===void 0){const o=dE[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r}return r}}const xc=gE;class _E extends Gh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Z()}getData(t){return null}prepareFrame(t){return Z()}renderFrame(t,e){return Z()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===Et.LOADED||e.getState()===Et.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Et.LOADED&&e!=Et.ERROR&&t.addEventListener(st.CHANGE,this.boundHandleImageChange_),e==Et.IDLE&&(t.load(),e=t.getState()),e==Et.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const mE=_E,Cc=[];let Vn=null;function pE(){Vn=Ee(1,1,void 0,{willReadFrequently:!0})}class yE extends mE{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=be(),this.pixelTransform=be(),this.inversePixelTransform=be(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){Vn||pE(),Vn.clearRect(0,0,1,1);let s;try{Vn.drawImage(t,e,i,1,1,0,0,1,1),s=Vn.getImageData(0,0,1,1).data}catch{return Vn=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&_n(ir(t.style.backgroundColor),ir(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Ee();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const s=Uh(i),r=$h(i),o=Hh(i),a=Vh(i);Wt(e.coordinateToPixelTransform,s),Wt(e.coordinateToPixelTransform,r),Wt(e.coordinateToPixelTransform,o),Wt(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Wt(l,s),Wt(l,r),Wt(l,o),Wt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const s=this.getLayer();if(s.hasListener(t)){const r=new Cu(t,this.inversePixelTransform,i,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Te.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Te.POSTRENDER,t,e)}getRenderTransform(t,e,i,s,r,o,a){const l=r/2,h=o/2,c=s/e,u=-c,f=-t[0]+a,d=-t[1];return xi(this.tempTransform,l,h,c,u,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const EE=yE;function xE(n,t,e,i,s,r,o,a,l,h,c,u){let f=n[t],d=n[t+1],g=0,m=0,E=0,y=0;function C(){g=f,m=d,t+=i,f=n[t],d=n[t+1],y+=E,E=Math.sqrt((f-g)*(f-g)+(d-m)*(d-m))}do C();while(t<e-i&&y+E<r);let S=E===0?0:(r-y)/E;const v=ne(g,f,S),A=ne(m,d,S),L=t-i,k=y,N=r+a*l(h,s,c);for(;t<e-i&&y+E<N;)C();S=E===0?0:(N-y)/E;const q=ne(g,f,S),J=ne(m,d,S);let lt;if(u){const V=[v,A,q,J];su(V,0,4,2,u,V,V),lt=V[0]>V[2]}else lt=v>q;const rt=Math.PI,et=[],Tt=L+i===t;t=L,E=0,y=k,f=n[t],d=n[t+1];let H;if(Tt){C(),H=Math.atan2(d-m,f-g),lt&&(H+=H>0?-rt:rt);const V=(q+v)/2,B=(J+A)/2;return et[0]=[V,B,(N-r)/2,H,s],et}s=s.replace(/\n/g," ");for(let V=0,B=s.length;V<B;){C();let X=Math.atan2(d-m,f-g);if(lt&&(X+=X>0?-rt:rt),H!==void 0){let Ot=X-H;if(Ot+=Ot>rt?-2*rt:Ot<-rt?2*rt:0,Math.abs(Ot)>o)return null}H=X;const mt=V;let pt=0;for(;V<B;++V){const Ot=lt?B-V-1:V,ae=a*l(h,s[Ot],c);if(t+i<e&&y+E<r+pt+ae/2)break;pt+=ae}if(V===mt)continue;const St=lt?s.substring(B-mt,B-V):s.substring(mt,V);S=E===0?0:(r+pt/2-y)/E;const O=ne(g,f,S),Me=ne(m,d,S);et.push([O,Me,pt/2,X,St]),r+=pt}return et}const zn=dn(),Ze=[],ke=[],Ne=[],qe=[];function vc(n){return n[3].declutterBox}const Rc=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Zr(n,t){return t==="start"?t=Rc.test(n)?"right":"left":t==="end"&&(t=Rc.test(n)?"left":"right"),hr[t]}function CE(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class vE{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=be(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const r=t+e+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,c=[l.scale[0]*h,l.scale[1]*h],u=Array.isArray(t),f=l.justify?hr[l.justify]:Zr(Array.isArray(t)?t[0]:t,l.textAlign||es),d=s&&o.lineWidth?o.lineWidth:0,g=u?t:t.split(`
`).reduce(CE,[]),{width:m,height:E,widths:y,heights:C,lineWidths:S}=ay(l,g),v=m+d,A=[],L=(v+2)*c[0],k=(E+d)*c[1],N={width:L<0?Math.floor(L):Math.ceil(L),height:k<0?Math.floor(k):Math.ceil(k),contextInstructions:A};(c[0]!=1||c[1]!=1)&&A.push("scale",c),s&&(A.push("strokeStyle",o.strokeStyle),A.push("lineWidth",d),A.push("lineCap",o.lineCap),A.push("lineJoin",o.lineJoin),A.push("miterLimit",o.miterLimit),A.push("setLineDash",[o.lineDash]),A.push("lineDashOffset",o.lineDashOffset)),i&&A.push("fillStyle",a.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");const q=.5-f;let J=f*v+q*d;const lt=[],rt=[];let et=0,Tt=0,H=0,V=0,B;for(let X=0,mt=g.length;X<mt;X+=2){const pt=g[X];if(pt===`
`){Tt+=et,et=0,J=f*v+q*d,++V;continue}const St=g[X+1]||l.font;St!==B&&(s&&lt.push("font",St),i&&rt.push("font",St),B=St),et=Math.max(et,C[H]);const O=[pt,J+q*y[H]+f*(y[H]-S[V]),.5*(d+et)+Tt];J+=y[H],s&&lt.push("strokeText",O),i&&rt.push("fillText",O),++H}return Array.prototype.push.apply(A,lt),Array.prototype.push.apply(A,rt),this.labels_[r]=N,N}replayTextBackground_(t,e,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,r,o,a,l,h,c,u,f,d,g,m,E){a*=f[0],l*=f[1];let y=i-a,C=s-l;const S=r+h>t?t-h:r,v=o+c>e?e-c:o,A=g[3]+S*f[0]+g[1],L=g[0]+v*f[1]+g[2],k=y-g[3],N=C-g[0];(m||u!==0)&&(Ze[0]=k,qe[0]=k,Ze[1]=N,ke[1]=N,ke[0]=k+A,Ne[0]=ke[0],Ne[1]=N+L,qe[1]=Ne[1]);let q;return u!==0?(q=xi(be(),i,s,1,1,u,-i,-s),Wt(q,Ze),Wt(q,ke),Wt(q,Ne),Wt(q,qe),fi(Math.min(Ze[0],ke[0],Ne[0],qe[0]),Math.min(Ze[1],ke[1],Ne[1],qe[1]),Math.max(Ze[0],ke[0],Ne[0],qe[0]),Math.max(Ze[1],ke[1],Ne[1],qe[1]),zn)):fi(Math.min(k,k+A),Math.min(N,N+L),Math.max(k,k+A),Math.max(N,N+L),zn),d&&(y=Math.round(y),C=Math.round(C)),{drawImageX:y,drawImageY:C,drawImageW:S,drawImageH:v,originX:h,originY:c,declutterBox:{minX:zn[0],minY:zn[1],maxX:zn[2],maxY:zn[3],value:E},canvasTransform:q,scale:f}}replayImageOrLabel_(t,e,i,s,r,o,a){const l=!!(o||a),h=s.declutterBox,c=t.canvas,u=a?a[2]*s.scale[0]/2:0;return h.minX-u<=c.width/e&&h.maxX+u>=0&&h.minY-u<=c.height/e&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,Ze,ke,Ne,qe,o,a),ly(t,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=Wt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const r=this.textStates[e],o=this.createLabel(t,e,s,i),a=this.strokeStates[i],l=this.pixelRatio,h=Zr(Array.isArray(t)?t[0]:t,r.textAlign||es),c=hr[r.textBaseline||rr],u=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*r.scale[0],d=h*f+2*(.5-h)*u,g=c*o.height/l+2*(.5-c)*u;return{label:o,anchorX:d,anchorY:g}}execute_(t,e,i,s,r,o,a,l){let h;this.pixelCoordinates_&&_n(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Mn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),q_(this.renderedTransform_,i));let c=0;const u=s.length;let f=0,d,g,m,E,y,C,S,v,A,L,k,N,q=0,J=0,lt=null,rt=null;const et=this.coordinateCache_,Tt=this.viewRotation_,H=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,V={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},B=this.instructions!=s||this.overlaps?0:200;let X,mt,pt,St;for(;c<u;){const O=s[c];switch(O[0]){case U.BEGIN_GEOMETRY:X=O[1],St=O[3],X.getGeometry()?a!==void 0&&!oe(a,St.getExtent())?c=O[2]+1:++c:c=O[2];break;case U.BEGIN_PATH:q>B&&(this.fill_(t),q=0),J>B&&(t.stroke(),J=0),!q&&!J&&(t.beginPath(),E=NaN,y=NaN),++c;break;case U.CIRCLE:f=O[1];const Ot=h[f],ae=h[f+1],At=h[f+2],w=h[f+3],W=At-Ot,D=w-ae,j=Math.sqrt(W*W+D*D);t.moveTo(Ot+j,ae),t.arc(Ot,ae,j,0,2*Math.PI,!0),++c;break;case U.CLOSE_PATH:t.closePath(),++c;break;case U.CUSTOM:f=O[1],d=O[2];const ct=O[3],_=O[4],p=O.length==6?O[5]:void 0;V.geometry=ct,V.feature=X,c in et||(et[c]=[]);const x=et[c];p?p(h,f,d,2,x):(x[0]=h[f],x[1]=h[f+1],x.length=2),_(x,V),++c;break;case U.DRAW_IMAGE:f=O[1],d=O[2],v=O[3],g=O[4],m=O[5];let R=O[6];const I=O[7],b=O[8],G=O[9],P=O[10];let F=O[11];const T=O[12];let K=O[13];const z=O[14],Y=O[15];if(!v&&O.length>=20){A=O[19],L=O[20],k=O[21],N=O[22];const te=this.drawLabelWithPointPlacement_(A,L,k,N);v=te.label,O[3]=v;const Nn=O[23];g=(te.anchorX-Nn)*this.pixelRatio,O[4]=g;const se=O[24];m=(te.anchorY-se)*this.pixelRatio,O[5]=m,R=v.height,O[6]=R,K=v.width,O[13]=K}let $;O.length>25&&($=O[25]);let tt,ut,ot;O.length>17?(tt=O[16],ut=O[17],ot=O[18]):(tt=In,ut=!1,ot=!1),P&&H?F+=Tt:!P&&!H&&(F-=Tt);let vt=0;for(;f<d;f+=2){if($&&$[vt++]<K/this.pixelRatio)continue;const te=this.calculateImageOrLabelDimensions_(v.width,v.height,h[f],h[f+1],K,R,g,m,b,G,F,T,r,tt,ut||ot,X),Nn=[t,e,v,te,I,ut?lt:null,ot?rt:null];if(l){if(z==="none")continue;if(z==="obstacle"){l.insert(te.declutterBox);continue}else{let se,Pe;if(Y){const ee=d-f;if(!Y[ee]){Y[ee]=Nn;continue}if(se=Y[ee],delete Y[ee],Pe=vc(se),l.collides(Pe))continue}if(l.collides(te.declutterBox))continue;se&&(l.insert(Pe),this.replayImageOrLabel_.apply(this,se)),l.insert(te.declutterBox)}}this.replayImageOrLabel_.apply(this,Nn)}++c;break;case U.DRAW_CHARS:const jt=O[1],Oe=O[2],Dn=O[3],pn=O[4];N=O[5];const ms=O[6],kt=O[7],Qt=O[8];k=O[9];const kn=O[10];A=O[11],L=O[12];const Xa=[O[13],O[13]],Or=this.textStates[L],Ri=Or.font,wi=[Or.scale[0]*kt,Or.scale[1]*kt];let Si;Ri in this.widths_?Si=this.widths_[Ri]:(Si={},this.widths_[Ri]=Si);const Ya=uu(h,jt,Oe,2),ja=Math.abs(wi[0])*lc(Ri,A,Si);if(pn||ja<=Ya){const te=this.textStates[L].textAlign,Nn=(Ya-ja)*Zr(A,te),se=xE(h,jt,Oe,2,A,Nn,ms,Math.abs(wi[0]),lc,Ri,Si,H?0:this.viewRotation_);t:if(se){const Pe=[];let ee,ps,ys,Kt,re;if(k)for(ee=0,ps=se.length;ee<ps;++ee){re=se[ee],ys=re[4],Kt=this.createLabel(ys,L,"",k),g=re[2]+(wi[0]<0?-kn:kn),m=Dn*Kt.height+(.5-Dn)*2*kn*wi[1]/wi[0]-Qt;const Fe=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,re[0],re[1],Kt.width,Kt.height,g,m,0,0,re[3],Xa,!1,In,!1,X);if(l&&l.collides(Fe.declutterBox))break t;Pe.push([t,e,Kt,Fe,1,null,null])}if(N)for(ee=0,ps=se.length;ee<ps;++ee){re=se[ee],ys=re[4],Kt=this.createLabel(ys,L,N,""),g=re[2],m=Dn*Kt.height-Qt;const Fe=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,re[0],re[1],Kt.width,Kt.height,g,m,0,0,re[3],Xa,!1,In,!1,X);if(l&&l.collides(Fe.declutterBox))break t;Pe.push([t,e,Kt,Fe,1,null,null])}l&&l.load(Pe.map(vc));for(let Fe=0,qu=Pe.length;Fe<qu;++Fe)this.replayImageOrLabel_.apply(this,Pe[Fe])}}++c;break;case U.END_GEOMETRY:if(o!==void 0){X=O[1];const te=o(X,St);if(te)return te}++c;break;case U.FILL:B?q++:this.fill_(t),++c;break;case U.MOVE_TO_LINE_TO:for(f=O[1],d=O[2],mt=h[f],pt=h[f+1],C=mt+.5|0,S=pt+.5|0,(C!==E||S!==y)&&(t.moveTo(mt,pt),E=C,y=S),f+=2;f<d;f+=2)mt=h[f],pt=h[f+1],C=mt+.5|0,S=pt+.5|0,(f==d-2||C!==E||S!==y)&&(t.lineTo(mt,pt),E=C,y=S);++c;break;case U.SET_FILL_STYLE:lt=O,this.alignFill_=O[2],q&&(this.fill_(t),q=0,J&&(t.stroke(),J=0)),t.fillStyle=O[1],++c;break;case U.SET_STROKE_STYLE:rt=O,J&&(t.stroke(),J=0),this.setStrokeStyle_(t,O),++c;break;case U.STROKE:B?J++:t.stroke(),++c;break;default:++c;break}}q&&this.fill_(t),J&&t.stroke()}execute(t,e,i,s,r,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,i,s,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,r)}}const RE=vE,qr=["Polygon","Circle","LineString","Image","Text","Default"];class wE{constructor(t,e,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=be(),this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);const s=t[e];for(const r in s){const o=s[r];i[r]=new RE(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,r,o){s=Math.round(s);const a=s*2+1,l=xi(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Ee(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=dn(),sm(u,t),aa(u,e*(this.renderBuffer_+s),u));const f=SE(s);let d;function g(A,L){const k=c.getImageData(0,0,a,a).data;for(let N=0,q=f.length;N<q;N++)if(k[f[N]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(A)){const J=(f[N]-3)/4,lt=s-J%a,rt=s-(J/a|0),et=r(A,L,lt*lt+rt*rt);if(et)return et}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(ci);let E,y,C,S,v;for(E=m.length-1;E>=0;--E){const A=m[E].toString();for(C=this.executorsByZIndex_[A],y=qr.length-1;y>=0;--y)if(d=qr[y],S=C[d],S!==void 0&&(v=S.executeHitDetection(c,l,i,g,u),v))return v}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],r=e[2],o=e[3],a=[i,s,i,o,r,o,r,s];return Mn(a,0,8,2,t,a),a}isEmpty(){return ui(this.executorsByZIndex_)}execute(t,e,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ci),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||qr;let h,c,u,f,d,g;for(a&&l.reverse(),h=0,c=l.length;h<c;++h){const m=l[h].toString();for(d=this.executorsByZIndex_[m],u=0,f=o.length;u<f;++u){const E=o[u];g=d[E],g!==void 0&&g.execute(t,e,i,s,r,a)}}this.maxExtent_&&t.restore()}}const Jr={};function SE(n){if(Jr[n]!==void 0)return Jr[n];const t=n*2+1,e=n*n,i=new Array(e+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){const a=r*r+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+r)*t+(n+o))*4+3),r>0&&l.push(((n-r)*t+(n+o))*4+3),o>0&&(l.push(((n+r)*t+(n-o))*4+3),r>0&&l.push(((n-r)*t+(n-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return Jr[n]=s,s}const wc=wE;class IE extends Hu{constructor(t,e,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?wm(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=be()}drawImages_(t,e,i,s){if(!this.image_)return;const r=Mn(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,u=r.length;c<u;c+=2){const f=r[c]-this.imageAnchorX_,d=r[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,m=d+this.imageAnchorY_;xi(a,g,m,1,1,h,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Mn(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=s){const l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,s,r){const o=this.context_,a=Mn(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return r&&o.closePath(),i}drawRings_(t,e,i,s){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Km(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(oe(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=r.length;a<l;++a){const h=r[a];s=this.drawRings_(i,s,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),_n(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:es;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:Ie(i||Ut)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=r||je;this.strokeState_={lineCap:s!==void 0?s:gi,lineDash:this.pixelRatio_===1?c:c.map(u=>u*this.pixelRatio_),lineDashOffset:(o||Ke)*this.pixelRatio_,lineJoin:a!==void 0?a:_i,lineWidth:(l!==void 0?l:ns)*this.pixelRatio_,miterLimit:h!==void 0?h:Qi,strokeStyle:Ie(i||ts)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const d=e.getColor();this.textFillState_={fillStyle:Ie(d||Ut)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),E=i.getLineDashOffset(),y=i.getLineJoin(),C=i.getWidth(),S=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:gi,lineDash:m||je,lineDashOffset:E||Ke,lineJoin:y!==void 0?y:_i,lineWidth:C!==void 0?C:ns,miterLimit:S!==void 0?S:Qi,strokeStyle:Ie(d||ts)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),c=t.getText(),u=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:s!==void 0?s:Ru,textAlign:u!==void 0?u:es,textBaseline:f!==void 0?f:rr},this.text_=c!==void 0?Array.isArray(c)?c.reduce((d,g,m)=>d+=m%2?" ":g,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const bE=IE,we=.5;function TE(n,t,e,i,s,r,o){const a=n[0]*we,l=n[1]*we,h=Ee(a,l);h.imageSmoothingEnabled=!1;const c=h.canvas,u=new bE(h,we,s,null,o),f=e.length,d=Math.floor((256*256*256-1)/f),g={};for(let E=1;E<=f;++E){const y=e[E-1],C=y.getStyleFunction()||i;if(!C)continue;let S=C(y,r);if(!S)continue;Array.isArray(S)||(S=[S]);const A=(E*d).toString(16).padStart(7,"#00000");for(let L=0,k=S.length;L<k;++L){const N=S[L],q=N.getGeometryFunction()(y);if(!q||!oe(s,q.getExtent()))continue;const J=N.clone(),lt=J.getFill();lt&&lt.setColor(A);const rt=J.getStroke();rt&&(rt.setColor(A),rt.setLineDash(null)),J.setText(void 0);const et=N.getImage();if(et){const B=et.getImageSize();if(!B)continue;const X=Ee(B[0],B[1],void 0,{alpha:!1}),mt=X.canvas;X.fillStyle=A,X.fillRect(0,0,mt.width,mt.height),J.setImage(new Nu({img:mt,anchor:et.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:et.getOrigin(),opacity:1,size:et.getSize(),scale:et.getScale(),rotation:et.getRotation(),rotateWithView:et.getRotateWithView()}))}const Tt=J.getZIndex()||0;let H=g[Tt];H||(H={},g[Tt]=H,H.Polygon=[],H.Circle=[],H.LineString=[],H.Point=[]);const V=q.getType();if(V==="GeometryCollection"){const B=q.getGeometriesArrayRecursive();for(let X=0,mt=B.length;X<mt;++X){const pt=B[X];H[pt.getType().replace("Multi","")].push(pt,J)}}else H[V.replace("Multi","")].push(q,J)}}const m=Object.keys(g).map(Number).sort(ci);for(let E=0,y=m.length;E<y;++E){const C=g[m[E]];for(const S in C){const v=C[S];for(let A=0,L=v.length;A<L;A+=2){u.setStyle(v[A+1]);for(let k=0,N=t.length;k<N;++k)u.setTransform(t[k]),u.drawGeometry(v[A])}}}return h.getImageData(0,0,c.width,c.height)}function AE(n,t,e){const i=[];if(e){const s=Math.floor(Math.round(n[0])*we),r=Math.floor(Math.round(n[1])*we),o=(Ft(s,0,e.width-1)+Ft(r,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],c=e.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);c&&c%u===0&&i.push(t[c/u-1])}return i}const LE=.5,Uu={Point:WE,LineString:kE,Polygon:zE,MultiPoint:BE,MultiLineString:NE,MultiPolygon:GE,GeometryCollection:DE,Circle:PE};function ME(n,t){return parseInt(It(n),10)-parseInt(It(t),10)}function OE(n,t){const e=Po(n,t);return e*e}function Po(n,t){return LE*n/t}function PE(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(r||o){const l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Sc(n,t,e,i,s,r,o){let a=!1;const l=e.getImage();if(l){const h=l.getImageState();h==Et.LOADED||h==Et.ERROR?l.unlistenImageChange(s):(h==Et.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return FE(n,t,e,i,r,o),a}function FE(n,t,e,i,s,r){const o=e.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,s);if(e.getRenderer())$u(n,a,e,t);else{const h=Uu[a.getType()];h(n,a,e,t,r)}}function $u(n,t,e,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,a=r.length;o<a;++o)$u(n,r[o],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function DE(n,t,e,i,s){const r=t.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=Uu[r[o].getType()];l(n,r[o],e,i,s)}}function kE(n,t,e,i,s){const r=e.getStroke();if(r){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function NE(n,t,e,i,s){const r=e.getStroke();if(r){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function GE(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(o||r){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function WE(n,t,e,i,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=Et.LOADED)return;let l=n;if(s){const c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){const u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(r,a),u.drawPoint(t,i)}else o&&o.getText()&&(a={})}const h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);const h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function BE(n,t,e,i,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=Et.LOADED)return;let l=n;if(s){const c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){const u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(r,a),u.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);const h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function zE(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(r||o){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class XE extends EE{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=dn(),this.wrappedRenderedExtent_=dn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,r=e.viewState,o=r.center,a=r.resolution,l=r.projection,h=r.rotation,c=l.getExtent(),u=this.getLayer().getSource(),f=e.pixelRatio,d=e.viewHints,g=!(d[Bt.ANIMATING]||d[Bt.INTERACTING]),m=this.compositionContext_,E=Math.round(e.size[0]*f),y=Math.round(e.size[1]*f),C=u.getWrapX()&&l.canWrapX(),S=C?ie(c):null,v=C?Math.ceil((s[2]-c[2])/S)+1:1;let A=C?Math.floor((s[0]-c[0])/S):0;do{const L=this.getRenderTransform(o,a,h,f,E,y,A*S);t.execute(m,1,L,h,g,void 0,i)}while(++A<v)}setupCompositionContext_(){if(this.opacity_!==1){const t=Ee(this.context.canvas.width,this.context.canvas.height,Cc);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,ny(this.compositionContext_),Cc.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];J_(this.pixelTransform,1/i,1/i),Xh(this.inversePixelTransform,this.pixelTransform);const r=tm(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup;let c=l&&!l.isEmpty()||h&&!h.isEmpty();if(!c&&!(this.getLayer().hasListener(Te.PRERENDER)||this.getLayer().hasListener(Te.POSTRENDER)))return null;const u=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);a.width!=u||a.height!=f?(a.width=u,a.height=f,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,u,f),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(c&&s.extent&&this.clipping){const m=Pi(s.extent);c=oe(m,t.extent),g=c&&!Un(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return c&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Wt(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],u=i[0]*we,f=i[1]*we;c.push(this.getRenderTransform(s,r,o,we,u,f,0).slice());const d=h.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!Un(g,l)){let m=l[0];const E=ie(g);let y=0,C;for(;m<g[0];)--y,C=E*y,c.push(this.getRenderTransform(s,r,o,we,u,f,C).slice()),m+=E;for(y=0,m=l[2];m>g[2];)++y,C=E*y,c.push(this.getRenderTransform(s,r,o,we,u,f,C).slice()),m-=E}this.hitDetectionImageData_=TE(i,c,this.renderedFeatures_,h.getStyleFunction(),l,r,o)}e(AE(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},c=function(d,g,m){const E=It(d),y=h[E];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return h[E]=!0,r.splice(r.lastIndexOf(y),1),s(d,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return h[E]=!0,s(d,l,g);r.push(h[E]={feature:d,layer:l,geometry:g,distanceSq:m,callback:s})}};let u;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(d=>u=d.forEachFeatureAtCoordinate(t,o,a,i,c,d===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(g=>g.value):null)),u}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[Bt.ANIMATING],r=t.viewHints[Bt.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,h=t.viewState,c=h.projection,u=h.resolution,f=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer();let m=e.getRenderOrder();m===void 0&&(m=ME);const E=h.center.slice(),y=aa(l,g*u),C=y.slice(),S=[y.slice()],v=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!Un(v,t.extent)){const H=ie(v),V=Math.max(ie(y)/2,H);y[0]=v[0]-V,y[2]=v[2]+V,Qh(E,c);const B=Zh(S[0],c);B[0]<v[0]&&B[2]<v[2]?S.push([B[0]+H,B[1],B[2]+H,B[3]]):B[0]>v[0]&&B[2]>v[2]&&S.push([B[0]-H,B[1],B[2]-H,B[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&Un(this.wrappedRenderedExtent_,y))return _n(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=E,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const A=new xc(Po(u,f),y,u,f);let L;this.getLayer().getDeclutter()&&(L=new xc(Po(u,f),y,u,f));let k;for(let H=0,V=S.length;H<V;++H)i.loadFeatures(S[H],u,c);const N=OE(u,f);let q=!0;const J=H=>{let V;const B=H.getStyleFunction()||e.getStyleFunction();if(B&&(V=B(H,u)),V){const X=this.renderFeature(H,N,V,A,k,L);q=q&&!X}},lt=iu(y),rt=i.getFeaturesInExtent(lt);m&&rt.sort(m);for(let H=0,V=rt.length;H<V;++H)J(rt[H]);this.renderedFeatures_=rt,this.ready=q;const et=A.finish(),Tt=new wc(y,u,f,i.getOverlaps(),et,e.getRenderBuffer());return L&&(this.declutterExecutorGroup=new wc(y,u,f,i.getOverlaps(),L.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=C,this.wrappedRenderedExtent_=y,this.renderedCenter_=E,this.renderedProjection_=c,this.replayGroup_=Tt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=Sc(s,t,i[l],e,this.boundHandleStyleImageChange_,r,o)||a;else a=Sc(s,t,i,e,this.boundHandleStyleImageChange_,r,o);return a}}const YE=XE;class jE extends nE{constructor(t){super(t)}createRenderer(){return new YE(this)}}const Ic=jE;class KE{constructor(t){this.rbush_=new Ou(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[It(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const o=t[s],a=e[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[It(a)]=l}this.rbush_.load(i)}remove(t){const e=It(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[It(e)],s=[i.minX,i.minY,i.maxX,i.maxY];Hs(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,r=t.length;s<r;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return ui(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return fi(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const bc=KE;class VE extends Le{constructor(t){super(),this.projection=qt(t.projection),this.attributions_=Tc(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,s){e.viewResolver=i,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Tc(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Tc(n){return n?Array.isArray(n)?function(t){return n}:typeof n=="function"?n:function(t){return[n]}:null}const HE=VE,he={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function UE(n,t){return[[-1/0,-1/0,1/0,1/0]]}let $E=!1;function ZE(n,t,e,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(e,i,s):n,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=$E,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const h=t.getType();let c;h=="json"||h=="text"?c=a.responseText:h=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):h=="arraybuffer"&&(c=a.response),c?r(t.readFeatures(c,{extent:e,featureProjection:s}),t.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function Ac(n,t){return function(e,i,s,r,o){const a=this;ZE(n,t,e,i,s,function(l,h){a.addFeatures(l),r!==void 0&&r(l)},o||hi)}}class Je extends gn{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class qE extends HE{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=hi,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Ct(this.format_,"`format` must be set when `url` is set"),this.loader_=Ac(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:UE;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new bc:null,this.loadedExtentsRtree_=new bc,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&i===void 0&&(i=new Se(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=It(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Je(he.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[ht(e,st.CHANGE,this.handleFeatureChange_,this),ht(e,li.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const s=e.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&(Ct(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=It(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=It(a);this.setupChangeEvents_(l,a);const h=a.getGeometry();if(h){const c=h.getExtent();e.push(c),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(he.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Je(he.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(he.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(he.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Ht.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(Ht.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(wt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Je(he.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const r=e(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),ui(this.nullGeometryFeatures_)||Ye(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=um(t,e);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||$i,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){const c=h.getGeometry(),u=a;if(a=c.closestPointXY(i,s,o,a),a<u){r=h;const f=Math.sqrt(a);l[0]=i-f,l[1]=s-f,l[2]=i+f,l[3]=s+f}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=It(e),s=e.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const r=e.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Je(he.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:It(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ui(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(c){return Un(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Je(he.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Je(he.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Je(he.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(s){if(Hs(s.extent,t))return i=s,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=It(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=It(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(wt),delete this.featureChangeKeys_[e];const s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Je(he.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){Ct(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Ac(t,this.format_))}}const Lc=qE;const JE={name:"MapContainer",components:{},props:{},mounted(){const n=new Ic({background:"transparent",source:new Lc({url:"/data/countries.geojson",format:new bp}),style:{"fill-color":["string",["get","COLOR"],"#eee"]}}),t=new u0({layers:[n],target:"map",view:new Re({center:[0,0],zoom:1}),style:{"z-index":"1 !important"}}),e=new Ic({source:new Lc,map:t,style:{"stroke-color":"rgba(112, 151, 117, 0.7)","fill-color":"rgba(112, 151, 117, 0.7)","stroke-width":2}});let i;const s=function(r){const o=t.forEachFeatureAtPixel(r,function(l){return l}),a=document.getElementById("info");o?a.innerHTML=o.get("ADMIN")||"&nbsp;":a.innerHTML="&nbsp;",o!==i&&(i&&e.getSource().removeFeature(i),o&&e.getSource().addFeature(o),i=o)};t.on("pointermove",function(r){if(r.dragging)return;const o=t.getEventPixel(r.originalEvent);s(o)}),t.on("click",function(r){s(r.pixel)})}},QE=Ud('<div class="map-container"><div id="map" class="map"></div><div id="info"> </div></div><div class="legend"><div class="bar"><span class="middle-line"></span></div><div class="numbers"><p>0%</p><p>25%</p><p>50%</p><p>75%</p><p>100%</p></div></div>',2);function tx(n,t,e,i,s,r){return QE}const ex=Sh(JE,[["render",tx]]);const nx={class:"container"},ix=ei("div",{class:"header-container"},[ei("header",{class:"centered-header"},[ei("h1",{class:"header"},"GreenGlobe Insights")])],-1),sx={__name:"HomeView",setup(n){return(t,e)=>(Eh(),Yd("div",nx,[ix,ei("main",null,[Zt(ex)])]))}},rx=P_({history:$g("/"),routes:[{path:"/",name:"home",component:sx}]}),Zu=bg(Mg);Zu.use(rx);Zu.mount("#app");
